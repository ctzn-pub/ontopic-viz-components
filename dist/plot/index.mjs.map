{"version":3,"sources":["../../src/infrastructure/PlotContainer.tsx","../../src/infrastructure/PlotTheme.tsx","../../src/infrastructure/PlotExport.tsx","../../src/plot/geo.state_map.v1.tsx","../../src/plot/geo.bubble.v1.tsx","../../src/plot/stat.boxplot.v1.tsx","../../src/plot/stat.splitbar.v1.tsx","../../src/plot/basic.dot.v1.tsx","../../src/plot/basic.bar.v1.tsx"],"names":["plot","Plot","jsx","useState","filename","useRef","useEffect","Plot3","Plot4","React4","Plot5","Plot6","Plot7"],"mappings":";;;;;;;AAOA,SAAS,MAAM,OAAA,EAAyC;AACtD,EAAA,OAAO,OAAA,CAAQ,MAAA,CAAO,OAAO,CAAA,CAAE,KAAK,GAAG,CAAA;AACzC;AAaO,SAAS,aAAA,CAAc;AAAA,EAC5B,QAAA;AAAA,EACA,KAAA,GAAQ,YAAA;AAAA,EACR,MAAA;AAAA,EACA,SAAA;AAAA,EACA,SAAA;AAAA,EACA;AACF,CAAA,EAAuB;AACrB,EAAA,MAAM,YAAA,GAAe,OAAuB,IAAI,CAAA;AAChD,EAAA,MAAM,OAAA,GAAU,OAA6B,IAAI,CAAA;AACjD,EAAA,MAAM,CAAC,cAAA,EAAgB,iBAAiB,CAAA,GAAI,SAAiB,GAAG,CAAA;AAGhE,EAAA,SAAA,CAAU,MAAM;AACd,IAAA,IAAI,KAAA,KAAU,YAAA,IAAgB,CAAC,YAAA,CAAa,OAAA,EAAS;AAErD,IAAA,MAAM,QAAA,GAAW,IAAI,cAAA,CAAe,CAAC,OAAA,KAAY;AAC/C,MAAA,MAAM,KAAA,GAAQ,QAAQ,CAAC,CAAA;AACvB,MAAA,IAAI,KAAA,EAAO;AACT,QAAA,iBAAA,CAAkB,KAAA,CAAM,YAAY,KAAK,CAAA;AAAA,MAC3C;AAAA,IACF,CAAC,CAAA;AAED,IAAA,QAAA,CAAS,OAAA,CAAQ,aAAa,OAAO,CAAA;AACrC,IAAA,OAAO,MAAM,SAAS,UAAA,EAAW;AAAA,EACnC,CAAA,EAAG,CAAC,KAAK,CAAC,CAAA;AAGV,EAAA,SAAA,CAAU,MAAM;AACd,IAAA,IAAI,CAAC,aAAa,OAAA,EAAS;AAG3B,IAAA,MAAM,UAAA,GAAa,KAAA,KAAU,YAAA,GAAe,cAAA,GAAiB,KAAA;AAG7D,IAAA,MAAMA,QAAYC,KAAA,CAAA,IAAA,CAAK;AAAA,MACrB,GAAG,QAAA;AAAA,MACH,KAAA,EAAO,UAAA;AAAA,MACP;AAAA,KACD,CAAA;AAGD,IAAA,IAAI,QAAQ,OAAA,EAAS;AACnB,MAAA,OAAA,CAAQ,QAAQ,MAAA,EAAO;AAAA,IACzB;AAGA,IAAA,YAAA,CAAa,OAAA,CAAQ,YAAYD,KAAI,CAAA;AACrC,IAAA,OAAA,CAAQ,OAAA,GAAUA,KAAAA;AAGlB,IAAA,aAAA,GAAgBA,KAAI,CAAA;AAGpB,IAAA,OAAO,MAAM;AACX,MAAA,IAAI,QAAQ,OAAA,EAAS;AACnB,QAAA,OAAA,CAAQ,QAAQ,MAAA,EAAO;AACvB,QAAA,OAAA,CAAQ,OAAA,GAAU,IAAA;AAAA,MACpB;AAAA,IACF,CAAA;AAAA,EACF,GAAG,CAAC,QAAA,EAAU,OAAO,MAAA,EAAQ,cAAA,EAAgB,aAAa,CAAC,CAAA;AAE3D,EAAA,uBACE,GAAA;AAAA,IAAC,KAAA;AAAA,IAAA;AAAA,MACC,GAAA,EAAK,YAAA;AAAA,MACL,SAAA,EAAW,EAAA,CAAG,gBAAA,EAAkB,SAAS,CAAA;AAAA,MACzC,IAAA,EAAK,KAAA;AAAA,MACL,YAAA,EAAY;AAAA;AAAA,GACd;AAEJ;ACvFA,IAAM,iBAAA,GAA+B;AAAA,EACnC,IAAA,EAAM,OAAA;AAAA,EACN,KAAA,EAAO;AAAA,IACL,IAAA,EAAM,8BAAA;AAAA,IACN,IAAA,EAAM;AAAA,GACR;AAAA,EACA,MAAA,EAAQ;AAAA,IACN,WAAA,EAAa;AAAA,MACX,oBAAA;AAAA;AAAA,MACA,oBAAA;AAAA;AAAA,MACA,mBAAA;AAAA;AAAA,MACA,oBAAA;AAAA;AAAA,MACA;AAAA;AAAA,KACF;AAAA,IACA,UAAA,EAAY,OAAA;AAAA,IACZ,SAAA,EAAW;AAAA,GACb;AAAA,EACA,IAAA,EAAM;AAAA,IACJ,MAAA,EAAQ,SAAA;AAAA,IACR,WAAA,EAAa,CAAA;AAAA,IACb,aAAA,EAAe;AAAA,GACjB;AAAA,EACA,IAAA,EAAM;AAAA,IACJ,QAAA,EAAU,EAAA;AAAA,IACV,UAAA,EAAY,GAAA;AAAA,IACZ,KAAA,EAAO;AAAA,GACT;AAAA,EACA,UAAA,EAAY,SAAA;AAAA,EACZ,UAAA,EAAY;AACd;AAEA,IAAM,gBAAA,GAA8B;AAAA,EAClC,GAAG,iBAAA;AAAA,EACH,IAAA,EAAM,MAAA;AAAA,EACN,MAAA,EAAQ;AAAA,IACN,GAAG,iBAAA,CAAkB,MAAA;AAAA,IACrB,WAAA,EAAa;AAAA,MACX,oBAAA;AAAA,MACA,oBAAA;AAAA,MACA,mBAAA;AAAA,MACA,oBAAA;AAAA,MACA;AAAA;AACF,GACF;AAAA,EACA,IAAA,EAAM;AAAA,IACJ,MAAA,EAAQ,SAAA;AAAA,IACR,WAAA,EAAa,CAAA;AAAA,IACb,aAAA,EAAe;AAAA,GACjB;AAAA,EACA,IAAA,EAAM;AAAA,IACJ,QAAA,EAAU,EAAA;AAAA,IACV,UAAA,EAAY,GAAA;AAAA,IACZ,KAAA,EAAO;AAAA,GACT;AAAA,EACA,UAAA,EAAY,SAAA;AAAA,EACZ,UAAA,EAAY;AACd;AAEA,IAAM,gBAAA,GAAmB,cAAyB,iBAAiB,CAAA;AAE5D,SAAS,iBAAA,CAAkB;AAAA,EAChC,KAAA,GAAQ,OAAA;AAAA,EACR;AACF,CAAA,EAGG;AACD,EAAA,MAAM,gBACJ,OAAO,KAAA,KAAU,WACb,KAAA,KAAU,MAAA,GACR,mBACA,iBAAA,GACF,KAAA;AAEN,EAAA,uBACEE,GAAAA,CAAC,gBAAA,CAAiB,UAAjB,EAA0B,KAAA,EAAO,eAC/B,QAAA,EACH,CAAA;AAEJ;AAEO,SAAS,YAAA,GAAe;AAC7B,EAAA,OAAO,WAAW,gBAAgB,CAAA;AACpC;AC9DO,SAAS,UAAA,CAAW;AAAA,EACzB,OAAA;AAAA,EACA,QAAA,GAAW,OAAA;AAAA,EACX,OAAA,GAAU,CAAC,KAAA,EAAO,KAAK,CAAA;AAAA,EACvB,MAAA;AAAA,EACA,YAAA;AAAA,EACA,mBAAA;AAAA,EACA,mBAAA;AAAA,EACA;AACF,CAAA,EAAoB;AAClB,EAAA,MAAM,CAAC,WAAA,EAAa,cAAc,CAAA,GAAIC,SAAS,KAAK,CAAA;AAEpD,EAAA,MAAM,QAAA,GAAW,OAAO,MAAA,KAA0B;AAChD,IAAA,IAAI,CAAC,QAAQ,OAAA,EAAS;AAEtB,IAAA,cAAA,CAAe,IAAI,CAAA;AAEnB,IAAA,IAAI;AACF,MAAA,MAAM,UAAA,GAAa,OAAA,CAAQ,OAAA,CAAQ,aAAA,CAAc,KAAK,CAAA;AACtD,MAAA,IAAI,CAAC,UAAA,EAAY,MAAM,IAAI,MAAM,cAAc,CAAA;AAE/C,MAAA,IAAI,WAAW,KAAA,EAAO;AACpB,QAAA,MAAM,SAAA,GAAY,IAAI,aAAA,EAAc,CAAE,kBAAkB,UAAU,CAAA;AAClE,QAAA,MAAM,IAAA,GAAO,IAAI,IAAA,CAAK,CAAC,SAAS,CAAA,EAAG,EAAE,IAAA,EAAM,eAAA,EAAiB,CAAA;AAC5D,QAAA,YAAA,CAAa,IAAA,EAAM,CAAA,EAAG,QAAQ,CAAA,IAAA,CAAM,CAAA;AAAA,MACtC,CAAA,MAAA,IAAW,WAAW,KAAA,EAAO;AAC3B,QAAA,MAAM,MAAA,GAAS,QAAA,CAAS,aAAA,CAAc,QAAQ,CAAA;AAC9C,QAAA,MAAM,GAAA,GAAM,MAAA,CAAO,UAAA,CAAW,IAAI,CAAA;AAClC,QAAA,IAAI,CAAC,GAAA,EAAK,MAAM,IAAI,MAAM,8BAA8B,CAAA;AAExD,QAAA,MAAM,SAAA,GAAY,IAAI,aAAA,EAAc,CAAE,kBAAkB,UAAU,CAAA;AAClE,QAAA,MAAM,GAAA,GAAM,IAAI,KAAA,EAAM;AACtB,QAAA,MAAM,OAAA,GAAU,IAAI,IAAA,CAAK,CAAC,SAAS,CAAA,EAAG,EAAE,IAAA,EAAM,eAAA,EAAiB,CAAA;AAC/D,QAAA,MAAM,GAAA,GAAM,GAAA,CAAI,eAAA,CAAgB,OAAO,CAAA;AAEvC,QAAA,GAAA,CAAI,SAAS,MAAM;AAEjB,UAAA,MAAA,CAAO,KAAA,GAAQ,UAAA,CAAW,KAAA,CAAM,OAAA,CAAQ,KAAA,GAAQ,CAAA;AAChD,UAAA,MAAA,CAAO,MAAA,GAAS,UAAA,CAAW,MAAA,CAAO,OAAA,CAAQ,KAAA,GAAQ,CAAA;AAClD,UAAA,GAAA,CAAI,KAAA,CAAM,GAAG,CAAC,CAAA;AACd,UAAA,GAAA,CAAI,SAAA,CAAU,GAAA,EAAK,CAAA,EAAG,CAAC,CAAA;AACvB,UAAA,GAAA,CAAI,gBAAgB,GAAG,CAAA;AAEvB,UAAA,MAAA,CAAO,MAAA,CAAO,CAAC,IAAA,KAAS;AACtB,YAAA,IAAI,IAAA,EAAM,YAAA,CAAa,IAAA,EAAM,CAAA,EAAG,QAAQ,CAAA,IAAA,CAAM,CAAA;AAC9C,YAAA,cAAA,CAAe,KAAK,CAAA;AAAA,UACtB,GAAG,WAAW,CAAA;AAAA,QAChB,CAAA;AAEA,QAAA,GAAA,CAAI,GAAA,GAAM,GAAA;AACV,QAAA;AAAA,MACF;AAAA,IACF,SAAS,KAAA,EAAO;AACd,MAAA,OAAA,CAAQ,KAAA,CAAM,kBAAkB,KAAK,CAAA;AAAA,IACvC,CAAA,SAAE;AACA,MAAA,IAAI,WAAW,KAAA,EAAO;AACpB,QAAA,cAAA,CAAe,KAAK,CAAA;AAAA,MACtB;AAAA,IACF;AAAA,EACF,CAAA;AAEA,EAAA,MAAM,YAAA,GAAe,CAAC,IAAA,EAAYC,SAAAA,KAAqB;AACrD,IAAA,MAAM,GAAA,GAAM,GAAA,CAAI,eAAA,CAAgB,IAAI,CAAA;AACpC,IAAA,MAAM,CAAA,GAAI,QAAA,CAAS,aAAA,CAAc,GAAG,CAAA;AACpC,IAAA,CAAA,CAAE,IAAA,GAAO,GAAA;AACT,IAAA,CAAA,CAAE,QAAA,GAAWA,SAAAA;AACb,IAAA,CAAA,CAAE,KAAA,EAAM;AACR,IAAA,GAAA,CAAI,gBAAgB,GAAG,CAAA;AAAA,EACzB,CAAA;AAGA,EAAA,IAAI,CAAC,MAAA,IAAU,CAAC,YAAA,EAAc;AAC5B,IAAA,uBACE,IAAA,CAAC,KAAA,EAAA,EAAI,SAAA,EAAU,aAAA,EACb,QAAA,EAAA;AAAA,sBAAA,IAAA;AAAA,QAAC,QAAA;AAAA,QAAA;AAAA,UACC,OAAA,EAAS,MAAM,QAAA,CAAS,KAAK,CAAA;AAAA,UAC7B,QAAA,EAAU,WAAA;AAAA,UACV,SAAA,EAAU,uEAAA;AAAA,UAEV,QAAA,EAAA;AAAA,4BAAAF,GAAAA,CAAC,QAAA,EAAA,EAAS,SAAA,EAAU,qBAAA,EAAsB,CAAA;AAAA,YACzC,cAAc,cAAA,GAAiB;AAAA;AAAA;AAAA,OAClC;AAAA,MACC,OAAA,CAAQ,QAAA,CAAS,KAAK,CAAA,oBACrBA,GAAAA;AAAA,QAAC,QAAA;AAAA,QAAA;AAAA,UACC,OAAA,EAAS,MAAM,QAAA,CAAS,KAAK,CAAA;AAAA,UAC7B,QAAA,EAAU,WAAA;AAAA,UACV,SAAA,EAAU,4EAAA;AAAA,UACX,QAAA,EAAA;AAAA;AAAA;AAED,KAAA,EAEJ,CAAA;AAAA,EAEJ;AAGA,EAAA,4BACG,YAAA,EAAA,EACC,QAAA,EAAA;AAAA,oBAAAA,GAAAA,CAAC,mBAAA,EAAA,EAAoB,OAAA,EAAO,IAAA,EAC1B,QAAA,kBAAA,IAAA,CAAC,MAAA,EAAA,EAAO,OAAA,EAAQ,SAAA,EAAU,IAAA,EAAK,IAAA,EAAK,QAAA,EAAU,WAAA,EAC5C,QAAA,EAAA;AAAA,sBAAAA,GAAAA,CAAC,QAAA,EAAA,EAAS,SAAA,EAAU,cAAA,EAAe,CAAA;AAAA,MAClC,cAAc,cAAA,GAAiB;AAAA,KAAA,EAClC,CAAA,EACF,CAAA;AAAA,oBACA,IAAA,CAAC,mBAAA,EAAA,EAAoB,KAAA,EAAM,KAAA,EACxB,QAAA,EAAA;AAAA,MAAA,OAAA,CAAQ,QAAA,CAAS,KAAK,CAAA,oBACrBA,GAAAA,CAAC,gBAAA,EAAA,EAAiB,OAAA,EAAS,MAAM,QAAA,CAAS,KAAK,CAAA,EAAG,QAAA,EAAA,eAAA,EAElD,CAAA;AAAA,MAED,OAAA,CAAQ,QAAA,CAAS,KAAK,CAAA,oBACrBA,GAAAA,CAAC,gBAAA,EAAA,EAAiB,OAAA,EAAS,MAAM,QAAA,CAAS,KAAK,CAAA,EAAG,QAAA,EAAA,eAAA,EAElD;AAAA,KAAA,EAEJ;AAAA,GAAA,EACF,CAAA;AAEJ;AC7EO,IAAM,WAAoC,CAAC;AAAA,EAChD,UAAA;AAAA,EACA,IAAA;AAAA,EACA,KAAA,GAAQ,GAAA;AAAA,EACR,MAAA,GAAS,GAAA;AAAA,EACT,SAAS,EAAC;AAAA,EACV,WAAA,GAAc,MAAA;AAAA,EACd,SAAA,GAAY,CAAA;AAAA,EACZ,aAAA,GAAgB,KAAA;AAAA,EAChB,UAAA,GAAa,YAAA;AAAA,EACb,SAAA,GAAY;AACd,CAAA,KAAM;AACJ,EAAA,MAAM;AAAA,IACJ,KAAA,GAAQ,EAAA;AAAA,IACR,QAAA,GAAW,EAAA;AAAA,IACX,OAAA,GAAU,EAAA;AAAA,IACV,WAAA,GAAc,EAAA;AAAA,IACd,WAAA,GAAc;AAAA,GAChB,GAAI,MAAA;AAEJ,EAAA,MAAM,YAAA,GAAqB,aAAuB,IAAI,CAAA;AAEtD,EAAM,gBAAU,MAAM;AACpB,IAAA,IAAI,CAAC,aAAa,OAAA,IAAW,CAAC,cAAc,CAAC,IAAA,IAAQ,IAAA,CAAK,MAAA,KAAW,CAAA,EAAG;AAExE,IAAA,YAAA,CAAa,QAAQ,SAAA,GAAY,EAAA;AAGjC,IAAA,MAAM,kBAAkB,IAAI,GAAA;AAAA,MAC1B,IAAA,CAAK,GAAA,CAAI,CAAC,EAAE,KAAA,EAAO,OAAM,KAAM,CAAC,KAAA,EAAO,KAAK,CAAC;AAAA,KAC/C;AAGA,IAAA,MAAM,MAAA,GAAuB,QAAA,CAAA,OAAA,CAAQ,UAAA,EAAY,UAAA,CAAW,QAAQ,MAAM,CAAA;AAG1E,IAAA,KAAA,MAAW,KAAA,IAAS,OAAO,QAAA,EAAU;AACnC,MAAA,KAAA,CAAM,WAAW,KAAA,GAAQ,eAAA,CAAgB,GAAA,CAAI,KAAA,CAAM,WAAW,IAAI,CAAA;AAAA,IACpE;AAGA,IAAA,MAAM,eAAA,GAAkB,CAAC,KAAA,KAAkB;AACzC,MAAA,IAAI,SAAS,GAAA,EAAM;AACjB,QAAA,OAAO,CAAA,EAAG,WAAW,CAAA,EAAA,CAAI,KAAA,GAAQ,KAAM,OAAA,CAAQ,CAAC,CAAC,CAAA,EAAA,EAAK,WAAW,CAAA,CAAA;AAAA,MACnE,CAAA,MAAO;AACL,QAAA,OAAO,CAAA,EAAG,WAAW,CAAA,EAAG,KAAK,GAAG,WAAW,CAAA,CAAA;AAAA,MAC7C;AAAA,IACF,CAAA;AAGA,IAAA,MAAM,SAAA,GAAqB,QAAA,CAAA,IAAA;AAAA,MACzB,UAAA;AAAA,MACA,WAAW,OAAA,CAAQ,MAAA;AAAA,MACnB,CAAC,CAAA,EAAQ,CAAA,KAAW,CAAA,KAAM;AAAA,KAC5B;AAEA,IAAA,MAAM,MAAA,GAAkB,QAAA,CAAA,OAAA;AAAA,MACtB,UAAA;AAAA,MACA,WAAW,OAAA,CAAQ;AAAA,KACrB;AAGA,IAAA,MAAMF,QAAY,KAAA,CAAA,IAAA,CAAK;AAAA,MACrB,OAAA;AAAA,MACA,UAAA;AAAA,MACA,KAAA,EAAO;AAAA,QACL,IAAA,EAAM,UAAA;AAAA,QACN,CAAA,EAAG,SAAA;AAAA,QACH,OAAA,EAAS,aAAA;AAAA,QACT,MAAA,EAAQ,WAAA;AAAA,QACR,MAAA,EAAQ,IAAA;AAAA,QACR,UAAA,EAAY;AAAA,OACd;AAAA,MACA,KAAA;AAAA,MACA,MAAA;AAAA,MACA,KAAA,EAAO;AAAA;AAAA,QAEA,UAAI,MAAA,EAAQ;AAAA,UACf,IAAA,EAAM,CAAC,CAAA,KAAW,CAAA,CAAE,UAAA,CAAW;AAAA,SAChC,CAAA;AAAA;AAAA,QAEI,UAAI,SAAA,EAAW;AAAA,UAClB,WAAA,EAAa;AAAA,SACd,CAAA;AAAA;AAAA,QAEI,UAAI,MAAA,EAAQ;AAAA,UACf,WAAA,EAAa;AAAA,SACd,CAAA;AAAA;AAAA,QAEI,KAAA,CAAA,GAAA;AAAA,UACH,MAAA,CAAO,QAAA;AAAA,UACF,KAAA,CAAA,OAAA;AAAA,YACE,KAAA,CAAA,QAAA,CAAS;AAAA,cACZ,KAAA,EAAO,CAAC,CAAA,KACN,CAAA,EAAG,CAAA,CAAE,UAAA,CAAW,IAAI,CAAA,EAAA,EAAK,eAAA,CAAgB,CAAA,CAAE,UAAA,CAAW,KAAK,CAAC,CAAA;AAAA,aAC/D;AAAA;AACH;AACF;AACF,KACD,CAAA;AAED,IAAA,YAAA,CAAa,OAAA,CAAQ,YAAYA,KAAI,CAAA;AAErC,IAAA,OAAO,MAAM;AACX,MAAAA,MAAK,MAAA,EAAO;AAAA,IACd,CAAA;AAAA,EACF,CAAA,EAAG,CAAC,UAAA,EAAY,IAAA,EAAM,OAAO,MAAA,EAAQ,KAAA,EAAO,QAAA,EAAU,OAAA,EAAS,aAAa,WAAA,EAAa,WAAA,EAAa,SAAA,EAAW,aAAA,EAAe,UAAU,CAAC,CAAA;AAE3I,EAAA,uBAAOE,GAAAA,CAAC,KAAA,EAAA,EAAI,GAAA,EAAK,cAAc,SAAA,EAAsB,CAAA;AACvD,CAAA;AAEA,IAAO,wBAAA,GAAQ;ACnGR,SAAS,SAAA,CAAU;AAAA,EACxB,IAAA;AAAA,EACA,YAAA;AAAA,EACA,WAAA;AAAA,EACA,OAAA;AAAA,EACA,QAAA;AAAA,EACA,OAAA;AAAA,EACA,KAAA;AAAA,EACA,QAAA;AAAA,EACA,IAAA,GAAO,SAAA;AAAA,EACP,WAAA,GAAc,GAAA;AAAA,EACd,MAAA,GAAS,MAAA;AAAA,EACT,WAAA,GAAc,CAAA;AAAA,EACd,KAAA,GAAQ,GAAA;AAAA,EACR,MAAA,GAAS,GAAA;AAAA,EACT,UAAA,GAAa,YAAA;AAAA,EACb,SAAA,GAAY;AACd,CAAA,EAAmB;AACjB,EAAA,MAAM,YAAA,GAAeG,OAAuB,IAAI,CAAA;AAEhD,EAAAC,UAAU,MAAM;AACd,IAAA,IAAI,CAAC,YAAA,CAAa,OAAA,IAAW,CAAC,IAAA,IAAQ,IAAA,CAAK,WAAW,CAAA,EAAG;AAGzD,IAAA,YAAA,CAAa,QAAQ,SAAA,GAAY,EAAA;AAGjC,IAAA,MAAM,QAAA,GAAW,IAAA,CAAK,GAAA,CAAI,CAAA,CAAA,MAAM;AAAA,MAC9B,GAAG,CAAA;AAAA,MACH,SAAA,EAAW,EAAE,YAAY,CAAA;AAAA,MACzB,QAAA,EAAU,EAAE,WAAW,CAAA;AAAA,MACvB,IAAA,EAAM,EAAE,OAAO,CAAA;AAAA,MACf,GAAI,QAAA,IAAY,EAAE,KAAA,EAAO,CAAA,CAAE,QAAQ,CAAA,EAAE;AAAA,MACrC,GAAI,OAAA,IAAW,EAAE,IAAA,EAAM,CAAA,CAAE,OAAO,CAAA;AAAE,KACpC,CAAE,CAAA;AAGF,IAAA,MAAM,KAAA,GAAe;AAAA;AAAA,MAEdC,UAAI,QAAA,EAAU;AAAA,QACjB,CAAA,EAAG,WAAA;AAAA,QACH,CAAA,EAAG,UAAA;AAAA,QACH,CAAA,EAAG,MAAA;AAAA,QACH,IAAA,EAAM,WAAW,OAAA,GAAU,IAAA;AAAA,QAC3B,WAAA;AAAA,QACA,MAAA;AAAA,QACA,WAAA;AAAA,QACA,KAAA,EAAO,OAAA,GACH,CAAA,CAAA,KAAK,CAAA,EAAG,EAAE,IAAI,CAAA,EAAA,EAAK,CAAA,CAAE,IAAA,CAAK,gBAAgB,CAAA,CAAA,GAC1C,CAAA,CAAA,KAAK,CAAA,CAAE,KAAK,cAAA,EAAe;AAAA,QAC/B,GAAA,EAAK;AAAA,OACN;AAAA,KACH;AAGA,IAAA,MAAMP,QAAYO,KAAA,CAAA,IAAA,CAAK;AAAA,MACrB,KAAA;AAAA,MACA,MAAA;AAAA,MACA,KAAA;AAAA,MACA,QAAA;AAAA,MACA,KAAA,EAAO;AAAA,QACL,eAAA,EAAiB,OAAA;AAAA,QACjB,UAAA,EAAY;AAAA,OACd;AAAA,MACA,UAAA,EAAY;AAAA,QACV,IAAA,EAAM,UAAA;AAAA,QACN,GAAI,UAAA,KAAe,YAAA,IAAgB,EAAE,MAAA,EAAQ,EAAE,MAAM,YAAA,EAAc,WAAA,EAAa,SAAS,GAAA,CAAI,CAAA,CAAA,KAAK,CAAC,CAAA,CAAE,SAAA,EAAW,EAAE,QAAQ,CAAC,GAAE;AAAE,OACjI;AAAA,MACA;AAAA,KACD,CAAA;AAED,IAAA,YAAA,CAAa,OAAA,CAAQ,YAAYP,KAAI,CAAA;AAErC,IAAA,OAAO,MAAM;AACX,MAAAA,OAAM,MAAA,EAAO;AAAA,IACf,CAAA;AAAA,EACF,GAAG,CAAC,IAAA,EAAM,YAAA,EAAc,WAAA,EAAa,SAAS,QAAA,EAAU,OAAA,EAAS,KAAA,EAAO,QAAA,EAAU,MAAM,WAAA,EAAa,MAAA,EAAQ,aAAa,KAAA,EAAO,MAAA,EAAQ,UAAU,CAAC,CAAA;AAEpJ,EAAA,uBACEE,GAAAA,CAAC,KAAA,EAAA,EAAI,GAAA,EAAK,cAAc,SAAA,EAAsB,CAAA;AAElD;AAEA,IAAO,qBAAA,GAAQ;ACjFR,SAAS,OAAA,CAAQ;AAAA,EACtB,IAAA;AAAA,EACA,CAAA;AAAA,EACA,CAAA;AAAA,EACA,KAAA;AAAA,EACA,MAAA;AAAA,EACA,MAAA;AAAA,EACA,IAAA,GAAO,SAAA;AAAA,EACP,WAAA,GAAc,GAAA;AAAA,EACd,MAAA,GAAS,SAAA;AAAA,EACT,WAAA,GAAc,GAAA;AAAA,EACd,aAAA,GAAgB,CAAA;AAAA,EAChB,KAAA,GAAQ,GAAA;AAAA,EACR,MAAA,GAAS,GAAA;AAAA,EACT,UAAA,GAAa,EAAA;AAAA,EACb,YAAA,GAAe,GAAA;AAAA,EACf,WAAA,GAAc,GAAA;AAAA,EACd,SAAA,GAAY;AACd,CAAA,EAAiB;AACf,EAAA,MAAM,YAAA,GAAeG,OAAuB,IAAI,CAAA;AAEhD,EAAAC,UAAU,MAAM;AACd,IAAA,IAAI,CAAC,YAAA,CAAa,OAAA,IAAW,CAAC,IAAA,IAAQ,IAAA,CAAK,WAAW,CAAA,EAAG;AAGzD,IAAA,YAAA,CAAa,QAAQ,SAAA,GAAY,EAAA;AAGjC,IAAA,MAAMN,QAAYQ,KAAA,CAAA,IAAA,CAAK;AAAA,MACrB,KAAA;AAAA,MACA,MAAA;AAAA,MACA,UAAA;AAAA,MACA,YAAA;AAAA,MACA,KAAA;AAAA,MACA,KAAA,EAAO;AAAA,QACL,eAAA,EAAiB,OAAA;AAAA,QACjB,UAAA,EAAY;AAAA,OACd;AAAA,MACA,CAAA,EAAG;AAAA,QACD,OAAO,MAAA,IAAU,CAAA;AAAA,QACjB,UAAA,EAAY;AAAA,OACd;AAAA,MACA,CAAA,EAAG;AAAA,QACD,OAAO,MAAA,IAAU,CAAA;AAAA,QACjB,IAAA,EAAM;AAAA,OACR;AAAA,MACA,KAAA,EAAO;AAAA;AAAA,QAEAA,WAAK,IAAA,EAAM;AAAA,UACd,CAAA;AAAA,UACA,CAAA;AAAA,UACA,IAAA;AAAA,UACA,WAAA;AAAA,UACA,MAAA;AAAA,UACA,WAAA;AAAA,UACA,CAAA,EAAG;AAAA;AAAA,SACJ;AAAA;AACH,KACD,CAAA;AAED,IAAA,YAAA,CAAa,OAAA,CAAQ,YAAYR,KAAI,CAAA;AAErC,IAAA,OAAO,MAAM;AACX,MAAAA,OAAM,MAAA,EAAO;AAAA,IACf,CAAA;AAAA,EACF,GAAG,CAAC,IAAA,EAAM,GAAG,CAAA,EAAG,KAAA,EAAO,QAAQ,MAAA,EAAQ,IAAA,EAAM,WAAA,EAAa,MAAA,EAAQ,aAAa,aAAA,EAAe,KAAA,EAAO,QAAQ,UAAA,EAAY,YAAA,EAAc,WAAW,CAAC,CAAA;AAEnJ,EAAA,uBACEE,GAAAA,CAAC,KAAA,EAAA,EAAI,GAAA,EAAK,cAAc,SAAA,EAAsB,CAAA;AAElD;AAEA,IAAO,uBAAA,GAAQ;AC5ER,IAAM,WAAoC,CAAC;AAAA,EAChD,IAAA;AAAA,EACA,aAAA;AAAA,EACA,KAAA,GAAQ,GAAA;AAAA,EACR,MAAA,GAAS,GAAA;AAAA,EACT,MAAA,GAAS,CAAC,SAAA,EAAW,SAAS,CAAA;AAAA,EAC9B,aAAA,GAAgB,EAAA;AAAA,EAChB,UAAA,GAAa,EAAA;AAAA,EACb,OAAA,GAAU,EAAA;AAAA,EACV,MAAA,GAAS,SAAA;AAAA,EACT,aAAA,GAAgB,YAAA;AAAA,EAChB,cAAc,CAAC,CAAA,KAAM,GAAG,CAAA,CAAE,OAAA,CAAQ,CAAC,CAAC,CAAA,CAAA,CAAA;AAAA,EACpC,SAAA,GAAY,EAAA;AAAA,EACZ,UAAA,GAAa,GAAA;AAAA,EACb,eAAA,GAAkB;AACpB,CAAA,KAAM;AACJ,EAAA,MAAM,YAAA,GAAqBO,aAAuB,IAAI,CAAA;AAEtD,EAAMA,gBAAU,MAAM;AACpB,IAAA,IAAI,CAAC,YAAA,CAAa,OAAA,IAAW,CAAC,IAAA,IAAQ,IAAA,CAAK,WAAW,CAAA,EAAG;AACzD,IAAA,IAAI,aAAA,CAAc,WAAW,CAAA,EAAG;AAC9B,MAAA,OAAA,CAAQ,MAAM,2CAA2C,CAAA;AACzD,MAAA;AAAA,IACF;AAEA,IAAA,YAAA,CAAa,QAAQ,SAAA,GAAY,EAAA;AAGjC,IAAA,IAAI,UAAA,GAAa,CAAC,GAAG,IAAI,CAAA;AACzB,IAAA,IAAI,WAAW,SAAA,EAAW;AACxB,MAAA,UAAA,CAAW,IAAA;AAAA,QAAK,CAAC,CAAA,EAAG,CAAA,KAClB,aAAA,KAAkB,YAAA,GACd,CAAA,CAAE,OAAA,GAAU,CAAA,CAAE,OAAA,GACd,CAAA,CAAE,OAAA,GAAU,CAAA,CAAE;AAAA,OACpB;AAAA,IACF,CAAA,MAAA,IAAW,WAAW,UAAA,EAAY;AAChC,MAAA,UAAA,CAAW,IAAA;AAAA,QAAK,CAAC,CAAA,EAAG,CAAA,KAClB,aAAA,KAAkB,eACd,CAAA,CAAE,QAAA,CAAS,aAAA,CAAc,CAAA,CAAE,QAAQ,CAAA,GACnC,CAAA,CAAE,QAAA,CAAS,aAAA,CAAc,EAAE,QAAQ;AAAA,OACzC;AAAA,IACF;AAGA,IAAA,MAAM,UAAU,UAAA,CAAW,OAAA;AAAA,MAAQ,CAAC,CAAA,KAClC,aAAA,CAAc,GAAA,CAAI,CAAC,MAAA,MAAY;AAAA,QAC7B,UAAU,CAAA,CAAE,QAAA;AAAA,QACZ,WAAA,EAAa,MAAA;AAAA,QACb,KAAA,EAAO,OAAO,CAAA,CAAE,MAAM,MAAM,QAAA,GAAY,CAAA,CAAE,MAAM,CAAA,GAAe;AAAA,OACjE,CAAE;AAAA,MACF,MAAA,CAAO,CAAC,CAAA,KAAM,CAAA,CAAE,UAAU,IAAI,CAAA;AAGhC,IAAA,MAAM,YAAY,UAAA,CAAW,OAAA;AAAA,MAAQ,CAAC,CAAA,KACpC,CAAC,CAAA,CAAE,SAAS,GAAG,aAAA,CAAc,GAAA,CAAI,CAAC,CAAA,KAAM,CAAA,CAAE,CAAC,CAAW,CAAC,CAAA,CAAE,MAAA;AAAA,QACvD,CAAC,CAAA,KAAM,OAAO,CAAA,KAAM;AAAA;AACtB,KACF;AACA,IAAA,MAAM,QAAA,GAAW,IAAA,CAAK,GAAA,CAAI,GAAG,SAAS,CAAA;AACtC,IAAA,MAAM,QAAA,GAAW,IAAA,CAAK,GAAA,CAAI,GAAG,SAAS,CAAA;AAEtC,IAAA,MAAMT,QAAYU,KAAA,CAAA,IAAA,CAAK;AAAA,MACrB,OAAA;AAAA,MACA,KAAA,EAAO;AAAA,QACL,eAAA,EAAiB,OAAA;AAAA,QACjB,UAAA,EAAY;AAAA,OACd;AAAA,MACA,KAAA,EAAO;AAAA,QACL,MAAA,EAAQ,IAAA;AAAA,QACR,MAAA,EAAQ,aAAA;AAAA,QACR,KAAA,EAAO;AAAA,OACT;AAAA,MACA,UAAA;AAAA,MACA,WAAA,EAAa,EAAA;AAAA,MACb,YAAA,EAAc,EAAA;AAAA,MACd,KAAA;AAAA,MACA,MAAA;AAAA,MACA,IAAA,EAAM,IAAA;AAAA,MACN,CAAA,EAAG;AAAA,QACD,KAAA,EAAO,aAAA;AAAA,QACP,QAAQ,UAAA,CAAW,GAAA,CAAI,CAAC,CAAA,KAAM,EAAE,QAAQ;AAAA,OAC1C;AAAA,MACA,CAAA,EAAG;AAAA,QACD,KAAA,EAAO,UAAA;AAAA,QACP,MAAA,EAAQ,CAAC,QAAA,EAAU,QAAQ,CAAA;AAAA,QAC3B,IAAA,EAAM;AAAA,OACR;AAAA,MACA,KAAA,EAAO;AAAA;AAAA,QAEAA,WAAK,UAAA,EAAY;AAAA,UACpB,CAAA,EAAG,UAAA;AAAA,UACH,CAAA,EAAG,SAAA;AAAA,UACH,IAAA,EAAM,SAAA;AAAA,UACN,OAAO,CAAC,CAAA,KAAM,YAAY,WAAA,CAAY,CAAA,CAAE,OAAO,CAAC,CAAA;AAAA,SACjD,CAAA;AAAA;AAAA,QAEIA,UAAI,OAAA,EAAS;AAAA,UAChB,CAAA,EAAG,UAAA;AAAA,UACH,CAAA,EAAG,OAAA;AAAA,UACH,IAAA,EAAM,aAAA;AAAA,UACN,CAAA,EAAG,CAAA;AAAA,UACH,GAAA,EAAK,IAAA;AAAA,UACL,KAAA,EAAO,CAAC,CAAA,KAAM,CAAA,EAAG,CAAA,CAAE,WAAW,CAAA,EAAA,EAAK,WAAA,CAAY,CAAA,CAAE,KAAM,CAAC,CAAA;AAAA,SACzD,CAAA;AAAA;AAAA,QAED,GAAI,eAAA,GACA;AAAA,UACOA,WAAK,UAAA,EAAY;AAAA,YACpB,CAAA,EAAG,UAAA;AAAA,YACH,CAAA,EAAG,SAAA;AAAA,YACH,IAAA,EAAM,CAAC,CAAA,KAAM,WAAA,CAAY,EAAE,OAAO,CAAA;AAAA,YAClC,EAAA,EAAI,GAAA;AAAA,YACJ,IAAA,EAAM,OAAA;AAAA,YACN,QAAA,EAAU,CAAA;AAAA,YACV,UAAA,EAAY,QAAA;AAAA,YACZ,UAAA,EAAY;AAAA,WACb;AAAA,YAEH,EAAC;AAAA;AAAA,QAEAA,KAAA,CAAA,KAAA,CAAM,CAAC,QAAQ,CAAC;AAAA;AACvB,KACD,CAAA;AAED,IAAA,YAAA,CAAa,OAAA,CAAQ,YAAYV,KAAI,CAAA;AAErC,IAAA,OAAO,MAAM;AACX,MAAAA,MAAK,MAAA,EAAO;AAAA,IACd,CAAA;AAAA,EACF,CAAA,EAAG;AAAA,IACD,IAAA;AAAA,IACA,aAAA;AAAA,IACA,KAAA;AAAA,IACA,MAAA;AAAA,IACA,MAAA;AAAA,IACA,aAAA;AAAA,IACA,UAAA;AAAA,IACA,OAAA;AAAA,IACA,MAAA;AAAA,IACA,aAAA;AAAA,IACA,WAAA;AAAA,IACA,UAAA;AAAA,IACA;AAAA,GACD,CAAA;AAED,EAAA,uBAAOE,GAAAA,CAAC,KAAA,EAAA,EAAI,GAAA,EAAK,cAAc,SAAA,EAAsB,CAAA;AACvD,CAAA;AAEA,IAAO,wBAAA,GAAQ;ACxJR,SAAS,OAAA,CAAQ;AAAA,EACtB,IAAA;AAAA,EACA,CAAA;AAAA,EACA,CAAA;AAAA,EACA,IAAA;AAAA,EACA,KAAA;AAAA,EACA,QAAA;AAAA,EACA,MAAA;AAAA,EACA,MAAA;AAAA,EACA,MAAA,GAAS,CAAA;AAAA,EACT,WAAA,GAAc,GAAA;AAAA,EACd,KAAA,GAAQ,GAAA;AAAA,EACR,MAAA,GAAS,GAAA;AAAA,EACT,UAAA,GAAa,EAAA;AAAA,EACb,WAAA;AAAA,EACA,SAAA;AAAA,EACA,SAAA,GAAY;AACd,CAAA,EAAiB;AACf,EAAA,MAAM,YAAA,GAAeG,OAAuB,IAAI,CAAA;AAEhD,EAAAC,UAAU,MAAM;AACd,IAAA,IAAI,CAAC,YAAA,CAAa,OAAA,IAAW,CAAC,IAAA,IAAQ,IAAA,CAAK,WAAW,CAAA,EAAG;AAGzD,IAAA,YAAA,CAAa,QAAQ,SAAA,GAAY,EAAA;AAGjC,IAAA,IAAI,WAAA,GAAmB,IAAA,GAAO,EAAE,MAAA,EAAQ,MAAK,GAAI,MAAA;AAEjD,IAAA,IAAI,QAAQ,WAAA,EAAa;AACvB,MAAA,IAAI,KAAA,CAAM,OAAA,CAAQ,WAAW,CAAA,EAAG;AAC9B,QAAA,WAAA,GAAc,EAAE,GAAG,WAAA,EAAa,KAAA,EAAO,WAAA,EAAY;AAAA,MACrD,CAAA,MAAO;AAEL,QAAA,WAAA,GAAc;AAAA,UACZ,GAAG,WAAA;AAAA,UACH,MAAA,EAAQ,MAAA,CAAO,IAAA,CAAK,WAAW,CAAA;AAAA,UAC/B,KAAA,EAAO,MAAA,CAAO,MAAA,CAAO,WAAW;AAAA,SAClC;AAAA,MACF;AAAA,IACF;AAGA,IAAA,MAAMN,QAAYW,KAAA,CAAA,IAAA,CAAK;AAAA,MACrB,KAAA;AAAA,MACA,QAAA;AAAA,MACA,KAAA,EAAO;AAAA,QACL,eAAA,EAAiB,OAAA;AAAA,QACjB,UAAA,EAAY;AAAA,OACd;AAAA,MACA,CAAA,EAAG;AAAA,QACD,OAAO,MAAA,IAAU,CAAA;AAAA,QACjB,IAAA,EAAM;AAAA,OACR;AAAA,MACA,CAAA,EAAG;AAAA,QACD,OAAO,MAAA,IAAU;AAAA,OACnB;AAAA,MACA,KAAA,EAAO,WAAA;AAAA,MACP,KAAA,EAAO;AAAA,QACAA,UAAI,IAAA,EAAM;AAAA,UACb,CAAA;AAAA,UACA,CAAA;AAAA,UACA,MAAM,IAAA,IAAQ,cAAA;AAAA,UACd,MAAA,EAAQ,OAAA;AAAA,UACR,WAAA,EAAa,CAAA;AAAA,UACb,CAAA,EAAG,MAAA;AAAA,UACH,WAAA;AAAA,UACA,KAAA,EAAO,SAAA,KAAc,CAAA,CAAA,KAAK,CAAA,EAAG,CAAA,CAAE,CAAC,CAAC,CAAA,EAAA,EAAK,CAAA,CAAE,CAAC,CAAC,CAAA,CAAA,CAAA;AAAA,UAC1C,GAAA,EAAK;AAAA,SACN,CAAA;AAAA,QACIA,KAAA,CAAA,KAAA,CAAM,CAAC,CAAC,CAAC;AAAA,OAChB;AAAA,MACA,KAAA;AAAA,MACA,MAAA;AAAA,MACA;AAAA,KACD,CAAA;AAED,IAAA,YAAA,CAAa,OAAA,CAAQ,YAAYX,KAAI,CAAA;AAErC,IAAA,OAAO,MAAM;AACX,MAAAA,OAAM,MAAA,EAAO;AAAA,IACf,CAAA;AAAA,EACF,GAAG,CAAC,IAAA,EAAM,CAAA,EAAG,CAAA,EAAG,MAAM,KAAA,EAAO,QAAA,EAAU,MAAA,EAAQ,MAAA,EAAQ,QAAQ,WAAA,EAAa,KAAA,EAAO,QAAQ,UAAA,EAAY,WAAA,EAAa,SAAS,CAAC,CAAA;AAE9H,EAAA,uBACEE,GAAAA,CAAC,KAAA,EAAA,EAAI,GAAA,EAAK,cAAc,SAAA,EAAsB,CAAA;AAElD;AAEA,IAAO,oBAAA,GAAQ;AC7ER,SAAS,QAAA,CAAS;AAAA,EACvB,IAAA;AAAA,EACA,CAAA;AAAA,EACA,CAAA;AAAA,EACA,MAAA;AAAA,EACA,KAAA;AAAA,EACA,QAAA;AAAA,EACA,OAAA;AAAA,EACA,MAAA;AAAA,EACA,MAAA;AAAA,EACA,IAAA,GAAO,SAAA;AAAA,EACP,WAAA,GAAc,SAAA;AAAA,EACd,gBAAA,GAAmB,CAAA;AAAA,EACnB,KAAA,GAAQ,GAAA;AAAA,EACR,MAAA,GAAS,GAAA;AAAA,EACT,YAAA,GAAe,EAAA;AAAA,EACf,WAAA,GAAc,CAAA;AAAA,EACd,WAAA;AAAA,EACA,MAAA;AAAA,EACA,SAAA,GAAY;AACd,CAAA,EAAkB;AAChB,EAAA,MAAM,YAAA,GAAeG,OAAuB,IAAI,CAAA;AAEhD,EAAAC,UAAU,MAAM;AACd,IAAA,IAAI,CAAC,YAAA,CAAa,OAAA,IAAW,CAAC,IAAA,IAAQ,IAAA,CAAK,WAAW,CAAA,EAAG;AAGzD,IAAA,YAAA,CAAa,QAAQ,SAAA,GAAY,EAAA;AAGjC,IAAA,MAAM,KAAA,GAAe;AAAA;AAAA,MAEdM,WAAK,IAAA,EAAM;AAAA,QACd,CAAA;AAAA,QACA,CAAA;AAAA,QACA;AAAA,OACD;AAAA,KACH;AAGA,IAAA,IAAI,MAAA,EAAQ;AACV,MAAA,KAAA,CAAM,IAAA;AAAA,QACCA,YAAM,IAAA,EAAM;AAAA,UACf,CAAA;AAAA,UACA,IAAI,MAAA,CAAO,KAAA;AAAA,UACX,IAAI,MAAA,CAAO,KAAA;AAAA,UACX,MAAA,EAAQ,WAAA;AAAA,UACR,WAAA,EAAa;AAAA,SACd;AAAA,OACH;AAAA,IACF;AAGA,IAAA,MAAMZ,QAAYY,KAAA,CAAA,IAAA,CAAK;AAAA,MACrB,KAAA;AAAA,MACA,MAAA;AAAA,MACA,YAAA;AAAA,MACA,KAAA;AAAA,MACA,QAAA;AAAA,MACA,OAAA;AAAA,MACA,KAAA,EAAO;AAAA,QACL,eAAA,EAAiB,OAAA;AAAA,QACjB,UAAA,EAAY;AAAA,OACd;AAAA,MACA,CAAA,EAAG;AAAA,QACD,OAAO,MAAA,IAAU,CAAA;AAAA,QACjB,UAAA,EAAY,WAAA;AAAA,QACZ,UAAA,EAAY,WAAA;AAAA,QACZ,QAAA,EAAU,CAAA;AAAA,QACV,WAAA,EAAa,EAAA;AAAA,QACb,GAAI,MAAA,IAAU,EAAE,KAAA,EAAO,MAAA;AAAO,OAChC;AAAA,MACA,CAAA,EAAG;AAAA,QACD,OAAO,MAAA,IAAU,CAAA;AAAA,QACjB,IAAA,EAAM;AAAA,OACR;AAAA,MACA;AAAA,KACD,CAAA;AAED,IAAA,YAAA,CAAa,OAAA,CAAQ,YAAYZ,KAAI,CAAA;AAErC,IAAA,OAAO,MAAM;AACX,MAAAA,OAAM,MAAA,EAAO;AAAA,IACf,CAAA;AAAA,EACF,CAAA,EAAG,CAAC,IAAA,EAAM,CAAA,EAAG,GAAG,MAAA,EAAQ,KAAA,EAAO,UAAU,OAAA,EAAS,MAAA,EAAQ,QAAQ,IAAA,EAAM,WAAA,EAAa,kBAAkB,KAAA,EAAO,MAAA,EAAQ,cAAc,WAAA,EAAa,WAAA,EAAa,MAAM,CAAC,CAAA;AAErK,EAAA,uBACEE,GAAAA,CAAC,KAAA,EAAA,EAAI,GAAA,EAAK,cAAc,SAAA,EAAsB,CAAA;AAElD;AAEA,IAAO,oBAAA,GAAQ","file":"index.mjs","sourcesContent":["'use client';\n\nimport { useEffect, useRef, useState } from 'react';\nimport * as Plot from '@observablehq/plot';\nimport type { PlotContainerProps } from '../types/plot';\n\n// Simple className utility\nfunction cn(...classes: (string | undefined | false)[]) {\n  return classes.filter(Boolean).join(' ');\n}\n\n/**\n * PlotContainer - Base component for all Observable Plot visualizations\n *\n * Handles:\n * - Responsive width calculation via ResizeObserver\n * - Plot creation and lifecycle management\n * - SVG element injection into the DOM\n * - Cleanup on unmount to prevent memory leaks\n * - Fixed or responsive sizing modes\n * - Accessibility (ARIA labels)\n */\nexport function PlotContainer({\n  plotSpec,\n  width = 'responsive',\n  height,\n  className,\n  ariaLabel,\n  onPlotCreated,\n}: PlotContainerProps) {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const plotRef = useRef<SVGSVGElement | null>(null);\n  const [containerWidth, setContainerWidth] = useState<number>(800);\n\n  // Handle responsive width\n  useEffect(() => {\n    if (width !== 'responsive' || !containerRef.current) return;\n\n    const observer = new ResizeObserver((entries) => {\n      const entry = entries[0];\n      if (entry) {\n        setContainerWidth(entry.contentRect.width);\n      }\n    });\n\n    observer.observe(containerRef.current);\n    return () => observer.disconnect();\n  }, [width]);\n\n  // Create/update plot\n  useEffect(() => {\n    if (!containerRef.current) return;\n\n    // Calculate final width\n    const finalWidth = width === 'responsive' ? containerWidth : width;\n\n    // Create plot with updated width\n    const plot = Plot.plot({\n      ...plotSpec,\n      width: finalWidth,\n      height: height,\n    }) as SVGSVGElement;\n\n    // Clear previous plot\n    if (plotRef.current) {\n      plotRef.current.remove();\n    }\n\n    // Append new plot\n    containerRef.current.appendChild(plot);\n    plotRef.current = plot;\n\n    // Callback\n    onPlotCreated?.(plot);\n\n    // Cleanup\n    return () => {\n      if (plotRef.current) {\n        plotRef.current.remove();\n        plotRef.current = null;\n      }\n    };\n  }, [plotSpec, width, height, containerWidth, onPlotCreated]);\n\n  return (\n    <div\n      ref={containerRef}\n      className={cn('plot-container', className)}\n      role=\"img\"\n      aria-label={ariaLabel}\n    />\n  );\n}\n","'use client';\n\nimport { createContext, useContext, ReactNode } from 'react';\nimport type { PlotTheme } from '../types/plot';\n\nconst defaultLightTheme: PlotTheme = {\n  name: 'light',\n  fonts: {\n    base: 'Inter, system-ui, sans-serif',\n    mono: 'IBM Plex Mono, monospace',\n  },\n  colors: {\n    categorical: [\n      'hsl(220, 70%, 50%)',  // Blue\n      'hsl(160, 60%, 45%)',  // Green\n      'hsl(30, 80%, 55%)',   // Orange\n      'hsl(280, 65%, 60%)',  // Purple\n      'hsl(340, 75%, 55%)',  // Red\n    ],\n    sequential: 'blues',\n    diverging: 'rdbu',\n  },\n  grid: {\n    stroke: '#e0e0e0',\n    strokeWidth: 1,\n    strokeOpacity: 0.5,\n  },\n  axes: {\n    fontSize: 12,\n    fontWeight: 400,\n    color: '#666666',\n  },\n  background: '#ffffff',\n  foreground: '#000000',\n};\n\nconst defaultDarkTheme: PlotTheme = {\n  ...defaultLightTheme,\n  name: 'dark',\n  colors: {\n    ...defaultLightTheme.colors,\n    categorical: [\n      'hsl(220, 70%, 60%)',\n      'hsl(160, 60%, 55%)',\n      'hsl(30, 80%, 65%)',\n      'hsl(280, 65%, 70%)',\n      'hsl(340, 75%, 65%)',\n    ],\n  },\n  grid: {\n    stroke: '#333333',\n    strokeWidth: 1,\n    strokeOpacity: 0.3,\n  },\n  axes: {\n    fontSize: 12,\n    fontWeight: 400,\n    color: '#999999',\n  },\n  background: '#0a0a0a',\n  foreground: '#ffffff',\n};\n\nconst PlotThemeContext = createContext<PlotTheme>(defaultLightTheme);\n\nexport function PlotThemeProvider({\n  theme = 'light',\n  children,\n}: {\n  theme?: 'light' | 'dark' | PlotTheme;\n  children: ReactNode;\n}) {\n  const resolvedTheme =\n    typeof theme === 'string'\n      ? theme === 'dark'\n        ? defaultDarkTheme\n        : defaultLightTheme\n      : theme;\n\n  return (\n    <PlotThemeContext.Provider value={resolvedTheme}>\n      {children}\n    </PlotThemeContext.Provider>\n  );\n}\n\nexport function usePlotTheme() {\n  return useContext(PlotThemeContext);\n}\n\n// Export theme presets\nexport { defaultLightTheme, defaultDarkTheme };\n","'use client';\n\nimport { useState } from 'react';\nimport { Download } from 'lucide-react';\n\n/**\n * PlotExport - Export functionality for Observable Plot charts\n *\n * Provides SVG and PNG export capabilities with 2x scaling for high-DPI displays.\n *\n * Note: This component expects Button and DropdownMenu components to be available.\n * These are typically provided by shadcn/ui in the consuming application.\n */\n\ninterface PlotExportProps {\n  plotRef: React.RefObject<HTMLDivElement>;\n  filename?: string;\n  formats?: ('svg' | 'png')[];\n  // Allow consumers to provide their own Button/Dropdown components\n  Button?: any;\n  DropdownMenu?: any;\n  DropdownMenuTrigger?: any;\n  DropdownMenuContent?: any;\n  DropdownMenuItem?: any;\n}\n\nexport function PlotExport({\n  plotRef,\n  filename = 'chart',\n  formats = ['svg', 'png'],\n  Button,\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n}: PlotExportProps) {\n  const [isExporting, setIsExporting] = useState(false);\n\n  const exportAs = async (format: 'svg' | 'png') => {\n    if (!plotRef.current) return;\n\n    setIsExporting(true);\n\n    try {\n      const svgElement = plotRef.current.querySelector('svg');\n      if (!svgElement) throw new Error('No SVG found');\n\n      if (format === 'svg') {\n        const svgString = new XMLSerializer().serializeToString(svgElement);\n        const blob = new Blob([svgString], { type: 'image/svg+xml' });\n        downloadBlob(blob, `${filename}.svg`);\n      } else if (format === 'png') {\n        const canvas = document.createElement('canvas');\n        const ctx = canvas.getContext('2d');\n        if (!ctx) throw new Error('Canvas context not available');\n\n        const svgString = new XMLSerializer().serializeToString(svgElement);\n        const img = new Image();\n        const svgBlob = new Blob([svgString], { type: 'image/svg+xml' });\n        const url = URL.createObjectURL(svgBlob);\n\n        img.onload = () => {\n          // 2x scale for high-DPI displays\n          canvas.width = svgElement.width.baseVal.value * 2;\n          canvas.height = svgElement.height.baseVal.value * 2;\n          ctx.scale(2, 2);\n          ctx.drawImage(img, 0, 0);\n          URL.revokeObjectURL(url);\n\n          canvas.toBlob((blob) => {\n            if (blob) downloadBlob(blob, `${filename}.png`);\n            setIsExporting(false);\n          }, 'image/png');\n        };\n\n        img.src = url;\n        return;\n      }\n    } catch (error) {\n      console.error('Export failed:', error);\n    } finally {\n      if (format !== 'png') {\n        setIsExporting(false);\n      }\n    }\n  };\n\n  const downloadBlob = (blob: Blob, filename: string) => {\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = filename;\n    a.click();\n    URL.revokeObjectURL(url);\n  };\n\n  // If UI components are not provided, return a simple button\n  if (!Button || !DropdownMenu) {\n    return (\n      <div className=\"plot-export\">\n        <button\n          onClick={() => exportAs('svg')}\n          disabled={isExporting}\n          className=\"px-3 py-1 text-sm border rounded hover:bg-gray-50 disabled:opacity-50\"\n        >\n          <Download className=\"h-4 w-4 inline mr-2\" />\n          {isExporting ? 'Exporting...' : 'Export SVG'}\n        </button>\n        {formats.includes('png') && (\n          <button\n            onClick={() => exportAs('png')}\n            disabled={isExporting}\n            className=\"ml-2 px-3 py-1 text-sm border rounded hover:bg-gray-50 disabled:opacity-50\"\n          >\n            Export PNG\n          </button>\n        )}\n      </div>\n    );\n  }\n\n  // Use provided UI components (shadcn/ui pattern)\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <Button variant=\"outline\" size=\"sm\" disabled={isExporting}>\n          <Download className=\"h-4 w-4 mr-2\" />\n          {isExporting ? 'Exporting...' : 'Export'}\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"end\">\n        {formats.includes('svg') && (\n          <DropdownMenuItem onClick={() => exportAs('svg')}>\n            Export as SVG\n          </DropdownMenuItem>\n        )}\n        {formats.includes('png') && (\n          <DropdownMenuItem onClick={() => exportAs('png')}>\n            Export as PNG\n          </DropdownMenuItem>\n        )}\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n}\n","'use client';\n\nimport * as Plot from \"@observablehq/plot\";\nimport * as topojson from \"topojson-client\";\nimport * as React from \"react\";\n\nexport interface StateMapProps {\n  /** US TopoJSON data with states and nation objects */\n  usTopoJSON: any;\n\n  /** State data with state names and values */\n  data: Array<{ state: string; value: number }>;\n\n  /** Chart width in pixels */\n  width?: number;\n\n  /** Chart height in pixels */\n  height?: number;\n\n  /** Optional labels for title, subtitle, caption */\n  labels?: {\n    title?: string;\n    valueSuffix?: string;\n    valuePrefix?: string;\n    subtitle?: string;\n    caption?: string;\n  };\n\n  /** Color scheme for choropleth */\n  colorScheme?: string;\n\n  /** Number of quantiles for color scale */\n  quantiles?: number;\n\n  /** Reverse color scale */\n  reverseColors?: boolean;\n\n  /** Projection type */\n  projection?: 'albers-usa' | 'mercator' | 'equal-earth';\n\n  /** Additional CSS classes */\n  className?: string;\n}\n\n/**\n * StateMap - US state choropleth map\n *\n * Visualizes state-level data with a color-coded map.\n *\n * @example\n * ```tsx\n * import us from '@/app/data/geo/us_counties_10m.json';\n *\n * <StateMap\n *   usTopoJSON={us}\n *   data={[\n *     { state: 'California', value: 850000 },\n *     { state: 'Texas', value: 620000 }\n *   ]}\n *   labels={{\n *     title: 'Population by State',\n *     valueSuffix: ' people',\n *     caption: 'Source: US Census'\n *   }}\n * />\n * ```\n */\nexport const StateMap: React.FC<StateMapProps> = ({\n  usTopoJSON,\n  data,\n  width = 975,\n  height = 610,\n  labels = {},\n  colorScheme = 'prgn',\n  quantiles = 5,\n  reverseColors = false,\n  projection = 'albers-usa',\n  className = ''\n}) => {\n  const {\n    title = '',\n    subtitle = '',\n    caption = '',\n    valueSuffix = '',\n    valuePrefix = ''\n  } = labels;\n\n  const containerRef = React.useRef<HTMLDivElement>(null);\n\n  React.useEffect(() => {\n    if (!containerRef.current || !usTopoJSON || !data || data.length === 0) return;\n\n    containerRef.current.innerHTML = ''; // Clear any existing content\n\n    // Map state names to values\n    const stateToValueMap = new Map(\n      data.map(({ state, value }) => [state, value])\n    );\n\n    // Extract state features from TopoJSON\n    const states: any = topojson.feature(usTopoJSON, usTopoJSON.objects.states);\n\n    // Attach values to state features\n    for (const state of states.features) {\n      state.properties.value = stateToValueMap.get(state.properties.name);\n    }\n\n    // Format numbers with k suffix for thousands\n    const formatNumberAsK = (value: number) => {\n      if (value >= 1000) {\n        return `${valuePrefix}${(value / 1000).toFixed(1)}k ${valueSuffix}`;\n      } else {\n        return `${valuePrefix}${value}${valueSuffix}`;\n      }\n    };\n\n    // Extract mesh and nation boundaries\n    const statemesh = topojson.mesh(\n      usTopoJSON,\n      usTopoJSON.objects.states,\n      (a: any, b: any) => a !== b\n    ) as any;\n\n    const nation = topojson.feature(\n      usTopoJSON,\n      usTopoJSON.objects.nation\n    ) as any;\n\n    // Create the plot\n    const plot = Plot.plot({\n      caption,\n      projection: projection,\n      color: {\n        type: \"quantile\",\n        n: quantiles,\n        reverse: reverseColors,\n        scheme: colorScheme,\n        legend: true,\n        tickFormat: formatNumberAsK\n      },\n      width,\n      height,\n      marks: [\n        // State fills\n        Plot.geo(states, {\n          fill: (d: any) => d.properties.value\n        }),\n        // State boundaries\n        Plot.geo(statemesh, {\n          strokeWidth: 0.75\n        }),\n        // Nation outline\n        Plot.geo(nation, {\n          strokeWidth: 1.5\n        }),\n        // Interactive tooltips\n        Plot.tip(\n          states.features,\n          Plot.pointer(\n            Plot.centroid({\n              title: (d: any) =>\n                `${d.properties.name}: ${formatNumberAsK(d.properties.value)}`\n            })\n          )\n        )\n      ]\n    });\n\n    containerRef.current.appendChild(plot);\n\n    return () => {\n      plot.remove();\n    };\n  }, [usTopoJSON, data, width, height, title, subtitle, caption, valueSuffix, valuePrefix, colorScheme, quantiles, reverseColors, projection]);\n\n  return <div ref={containerRef} className={className}></div>;\n};\n\nexport default StateMap;\n","'use client';\n\nimport React, { useRef, useEffect } from 'react';\nimport * as Plot from \"@observablehq/plot\";\n\n/**\n * BubbleMap Component\n *\n * A geographic bubble map visualization using Observable Plot.\n * Displays data points as circles on a map, with size encoding values.\n *\n * NOTE: This version requires data with longitude and latitude coordinates.\n * For TopoJSON-based maps, see the geography integration guide.\n *\n * @example\n * ```tsx\n * <BubbleMap\n *   data={[\n *     { lon: -122.4194, lat: 37.7749, value: 850000, name: 'San Francisco' },\n *     { lon: -74.0060, lat: 40.7128, value: 8400000, name: 'New York' }\n *   ]}\n *   longitudeKey=\"lon\"\n *   latitudeKey=\"lat\"\n *   sizeKey=\"value\"\n *   nameKey=\"name\"\n * />\n * ```\n */\n\nexport interface BubbleMapProps {\n  /** Data array with geographic coordinates */\n  data: any[];\n\n  /** Field name for longitude */\n  longitudeKey: string;\n\n  /** Field name for latitude */\n  latitudeKey: string;\n\n  /** Field name for bubble size */\n  sizeKey: string;\n\n  /** Optional field name for bubble color encoding */\n  colorKey?: string;\n\n  /** Optional field name for labels/tooltips */\n  nameKey?: string;\n\n  /** Chart title */\n  title?: string;\n\n  /** Chart subtitle */\n  subtitle?: string;\n\n  /** Bubble fill color (if not using colorKey) */\n  fill?: string;\n\n  /** Bubble fill opacity */\n  fillOpacity?: number;\n\n  /** Bubble stroke color */\n  stroke?: string;\n\n  /** Bubble stroke width */\n  strokeWidth?: number;\n\n  /** Chart width in pixels */\n  width?: number;\n\n  /** Chart height in pixels */\n  height?: number;\n\n  /** Projection type for geographic data */\n  projection?: 'albers-usa' | 'mercator' | 'equal-earth' | 'orthographic';\n\n  /** Additional CSS classes */\n  className?: string;\n}\n\nexport function BubbleMap({\n  data,\n  longitudeKey,\n  latitudeKey,\n  sizeKey,\n  colorKey,\n  nameKey,\n  title,\n  subtitle,\n  fill = '#4682b4',\n  fillOpacity = 0.6,\n  stroke = '#fff',\n  strokeWidth = 1,\n  width = 975,\n  height = 610,\n  projection = 'albers-usa',\n  className = ''\n}: BubbleMapProps) {\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (!containerRef.current || !data || data.length === 0) return;\n\n    // Clear previous plot\n    containerRef.current.innerHTML = '';\n\n    // Transform data for Plot\n    const plotData = data.map(d => ({\n      ...d,\n      longitude: d[longitudeKey],\n      latitude: d[latitudeKey],\n      size: d[sizeKey],\n      ...(colorKey && { color: d[colorKey] }),\n      ...(nameKey && { name: d[nameKey] })\n    }));\n\n    // Build marks\n    const marks: any[] = [\n      // Bubble dots\n      Plot.dot(plotData, {\n        x: 'longitude',\n        y: 'latitude',\n        r: 'size',\n        fill: colorKey ? 'color' : fill,\n        fillOpacity,\n        stroke,\n        strokeWidth,\n        title: nameKey\n          ? d => `${d.name}: ${d.size.toLocaleString()}`\n          : d => d.size.toLocaleString(),\n        tip: true\n      })\n    ];\n\n    // Create the plot\n    const plot = Plot.plot({\n      width,\n      height,\n      title,\n      subtitle,\n      style: {\n        backgroundColor: \"white\",\n        fontFamily: \"sans-serif\",\n      },\n      projection: {\n        type: projection,\n        ...(projection === 'albers-usa' && { domain: { type: 'MultiPoint', coordinates: plotData.map(d => [d.longitude, d.latitude]) } })\n      },\n      marks\n    }) as SVGSVGElement;\n\n    containerRef.current.appendChild(plot);\n\n    return () => {\n      plot?.remove();\n    };\n  }, [data, longitudeKey, latitudeKey, sizeKey, colorKey, nameKey, title, subtitle, fill, fillOpacity, stroke, strokeWidth, width, height, projection]);\n\n  return (\n    <div ref={containerRef} className={className} />\n  );\n}\n\nexport default BubbleMap;\n","'use client';\n\nimport React, { useRef, useEffect } from 'react';\nimport * as Plot from \"@observablehq/plot\";\n\n/**\n * BoxPlot Component\n *\n * A box plot visualization using Observable Plot for showing distributions\n * and identifying outliers across categories.\n *\n * @example\n * ```tsx\n * <BoxPlot\n *   data={[\n *     { category: 'Group A', value: 10 },\n *     { category: 'Group A', value: 15 },\n *     { category: 'Group B', value: 20 }\n *   ]}\n *   x=\"category\"\n *   y=\"value\"\n * />\n * ```\n */\n\nexport interface BoxPlotProps {\n  /**\n   * Data array - should be in \"long\" format with one row per observation.\n   * Each row should have a category field and a value field.\n   */\n  data: any[];\n\n  /** Field name for x-axis (categories) */\n  x: string;\n\n  /** Field name for y-axis (values) */\n  y: string;\n\n  /** Chart title */\n  title?: string;\n\n  /** X-axis label */\n  xLabel?: string;\n\n  /** Y-axis label */\n  yLabel?: string;\n\n  /** Box fill color */\n  fill?: string;\n\n  /** Box fill opacity (0-1) */\n  fillOpacity?: number;\n\n  /** Box stroke color */\n  stroke?: string;\n\n  /** Box stroke width */\n  strokeWidth?: number;\n\n  /** Outlier dot radius */\n  outlierRadius?: number;\n\n  /** Chart width in pixels */\n  width?: number;\n\n  /** Chart height in pixels */\n  height?: number;\n\n  /** Left margin for y-axis labels */\n  marginLeft?: number;\n\n  /** Bottom margin for x-axis labels */\n  marginBottom?: number;\n\n  /** Rotate x-axis labels (degrees) */\n  xTickRotate?: number;\n\n  /** Additional CSS classes */\n  className?: string;\n}\n\nexport function BoxPlot({\n  data,\n  x,\n  y,\n  title,\n  xLabel,\n  yLabel,\n  fill = \"#4682b4\",\n  fillOpacity = 0.4,\n  stroke = \"#2c5f8d\",\n  strokeWidth = 1.5,\n  outlierRadius = 3,\n  width = 800,\n  height = 500,\n  marginLeft = 60,\n  marginBottom = 100,\n  xTickRotate = -45,\n  className = ''\n}: BoxPlotProps) {\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (!containerRef.current || !data || data.length === 0) return;\n\n    // Clear previous plot\n    containerRef.current.innerHTML = '';\n\n    // Create the plot\n    const plot = Plot.plot({\n      width,\n      height,\n      marginLeft,\n      marginBottom,\n      title,\n      style: {\n        backgroundColor: \"white\",\n        fontFamily: \"sans-serif\",\n      },\n      x: {\n        label: xLabel || x,\n        tickRotate: xTickRotate\n      },\n      y: {\n        label: yLabel || y,\n        grid: true\n      },\n      marks: [\n        // Box plot with Observable Plot's built-in boxY mark\n        Plot.boxY(data, {\n          x,\n          y,\n          fill,\n          fillOpacity,\n          stroke,\n          strokeWidth,\n          r: outlierRadius  // Outlier dot radius\n        })\n      ]\n    }) as SVGSVGElement;\n\n    containerRef.current.appendChild(plot);\n\n    return () => {\n      plot?.remove();\n    };\n  }, [data, x, y, title, xLabel, yLabel, fill, fillOpacity, stroke, strokeWidth, outlierRadius, width, height, marginLeft, marginBottom, xTickRotate]);\n\n  return (\n    <div ref={containerRef} className={className} />\n  );\n}\n\nexport default BoxPlot;\n","'use client';\n\nimport * as Plot from \"@observablehq/plot\";\nimport * as React from \"react\";\n\nexport interface SplitBarDataPoint {\n  /** Category label (e.g., state name) */\n  category: string;\n  /** Overall value shown as bar */\n  overall: number;\n  /** Values for subcategories shown as dots */\n  [subCategory: string]: string | number;\n}\n\nexport interface SplitBarProps {\n  /** Array of data points with category, overall, and subcategory values */\n  data: SplitBarDataPoint[];\n\n  /** Names of subcategories to display as dots (exactly 2) */\n  subcategories: [string, string];\n\n  /** Chart width in pixels */\n  width?: number;\n\n  /** Chart height in pixels */\n  height?: number;\n\n  /** Colors for the two subcategories */\n  colors?: [string, string];\n\n  /** Label for the category axis */\n  categoryLabel?: string;\n\n  /** Label for the value axis */\n  valueLabel?: string;\n\n  /** Caption text */\n  caption?: string;\n\n  /** Sort order for categories */\n  sortBy?: 'overall' | 'category' | 'none';\n\n  /** Sort direction */\n  sortDirection?: 'ascending' | 'descending';\n\n  /** Value formatter function */\n  formatValue?: (value: number) => string;\n\n  /** Additional CSS classes */\n  className?: string;\n\n  /** Left margin for category labels */\n  marginLeft?: number;\n\n  /** Show value labels on bars */\n  showValueLabels?: boolean;\n}\n\n/**\n * SplitBar - Bars with contrasting subgroup dots\n *\n * Displays overall values as horizontal bars with subcategory values\n * overlaid as colored dots, useful for comparing subgroups within categories.\n *\n * @example\n * ```tsx\n * <SplitBar\n *   data={[\n *     { category: 'Alabama', overall: 25.5, Male: 23.2, Female: 27.8 },\n *     { category: 'Alaska', overall: 22.1, Male: 20.5, Female: 23.7 }\n *   ]}\n *   subcategories={['Male', 'Female']}\n *   colors={['#e15759', '#59a14f']}\n *   valueLabel=\"Prevalence (%)\"\n * />\n * ```\n */\nexport const SplitBar: React.FC<SplitBarProps> = ({\n  data,\n  subcategories,\n  width = 800,\n  height = 750,\n  colors = ['#e15759', '#59a14f'],\n  categoryLabel = '',\n  valueLabel = '',\n  caption = '',\n  sortBy = 'overall',\n  sortDirection = 'descending',\n  formatValue = (v) => `${v.toFixed(1)}%`,\n  className = '',\n  marginLeft = 150,\n  showValueLabels = true\n}) => {\n  const containerRef = React.useRef<HTMLDivElement>(null);\n\n  React.useEffect(() => {\n    if (!containerRef.current || !data || data.length === 0) return;\n    if (subcategories.length !== 2) {\n      console.error('SplitBar requires exactly 2 subcategories');\n      return;\n    }\n\n    containerRef.current.innerHTML = '';\n\n    // Sort data\n    let sortedData = [...data];\n    if (sortBy === 'overall') {\n      sortedData.sort((a, b) =>\n        sortDirection === 'descending'\n          ? b.overall - a.overall\n          : a.overall - b.overall\n      );\n    } else if (sortBy === 'category') {\n      sortedData.sort((a, b) =>\n        sortDirection === 'descending'\n          ? b.category.localeCompare(a.category)\n          : a.category.localeCompare(b.category)\n      );\n    }\n\n    // Prepare dot data\n    const dotData = sortedData.flatMap((d) =>\n      subcategories.map((subCat) => ({\n        category: d.category,\n        subcategory: subCat,\n        value: typeof d[subCat] === 'number' ? (d[subCat] as number) : null\n      }))\n    ).filter((d) => d.value !== null);\n\n    // Calculate value range\n    const allValues = sortedData.flatMap((d) =>\n      [d.overall, ...subcategories.map((s) => d[s] as number)].filter(\n        (v) => typeof v === 'number'\n      )\n    );\n    const minValue = Math.min(...allValues);\n    const maxValue = Math.max(...allValues);\n\n    const plot = Plot.plot({\n      caption,\n      style: {\n        backgroundColor: 'white',\n        fontFamily: 'sans-serif'\n      },\n      color: {\n        legend: true,\n        domain: subcategories,\n        range: colors\n      },\n      marginLeft,\n      marginRight: 40,\n      marginBottom: 60,\n      width,\n      height,\n      clip: true,\n      y: {\n        label: categoryLabel,\n        domain: sortedData.map((d) => d.category)\n      },\n      x: {\n        label: valueLabel,\n        domain: [minValue, maxValue],\n        grid: true\n      },\n      marks: [\n        // Background bars for overall values\n        Plot.barX(sortedData, {\n          y: 'category',\n          x: 'overall',\n          fill: '#e4e4e4',\n          title: (d) => `Overall: ${formatValue(d.overall)}`\n        }),\n        // Dots for subcategory values\n        Plot.dot(dotData, {\n          y: 'category',\n          x: 'value',\n          fill: 'subcategory',\n          r: 5,\n          tip: true,\n          title: (d) => `${d.subcategory}: ${formatValue(d.value!)}`\n        }),\n        // Value labels on bars\n        ...(showValueLabels\n          ? [\n              Plot.text(sortedData, {\n                y: 'category',\n                x: 'overall',\n                text: (d) => formatValue(d.overall),\n                dx: -25,\n                fill: 'black',\n                fontSize: 9,\n                fontWeight: 'normal',\n                textAnchor: 'start'\n              })\n            ]\n          : []),\n        // Zero reference line\n        Plot.ruleX([minValue])\n      ]\n    });\n\n    containerRef.current.appendChild(plot);\n\n    return () => {\n      plot.remove();\n    };\n  }, [\n    data,\n    subcategories,\n    width,\n    height,\n    colors,\n    categoryLabel,\n    valueLabel,\n    caption,\n    sortBy,\n    sortDirection,\n    formatValue,\n    marginLeft,\n    showValueLabels\n  ]);\n\n  return <div ref={containerRef} className={className}></div>;\n};\n\nexport default SplitBar;\n","'use client';\n\nimport React, { useRef, useEffect } from 'react';\nimport * as Plot from \"@observablehq/plot\";\n\n/**\n * DotPlot Component\n *\n * A simple, reusable dot plot visualization using Observable Plot.\n * Suitable for comparing values across categories or groups.\n *\n * @example\n * ```tsx\n * <DotPlot\n *   data={wages}\n *   x=\"median_wage\"\n *   y=\"gender\"\n *   fill=\"gender\"\n *   title=\"Wage Distribution by Gender\"\n * />\n * ```\n */\n\nexport interface DotPlotProps {\n  /** Data array to visualize */\n  data: any[];\n\n  /** Field name for x-axis (horizontal position) */\n  x: string;\n\n  /** Field name for y-axis (vertical position/category) */\n  y: string;\n\n  /** Optional field name for color encoding */\n  fill?: string;\n\n  /** Chart title */\n  title?: string;\n\n  /** Chart subtitle */\n  subtitle?: string;\n\n  /** X-axis label */\n  xLabel?: string;\n\n  /** Y-axis label */\n  yLabel?: string;\n\n  /** Dot radius in pixels */\n  radius?: number;\n\n  /** Dot fill opacity (0-1) */\n  fillOpacity?: number;\n\n  /** Chart width in pixels */\n  width?: number;\n\n  /** Chart height in pixels */\n  height?: number;\n\n  /** Left margin in pixels (for y-axis labels) */\n  marginLeft?: number;\n\n  /** Custom color scheme */\n  colorScheme?: string[] | Record<string, string>;\n\n  /** Optional format function for tooltips */\n  tipFormat?: (d: any) => string;\n\n  /** Additional CSS classes */\n  className?: string;\n}\n\nexport function DotPlot({\n  data,\n  x,\n  y,\n  fill,\n  title,\n  subtitle,\n  xLabel,\n  yLabel,\n  radius = 4,\n  fillOpacity = 0.7,\n  width = 700,\n  height = 300,\n  marginLeft = 80,\n  colorScheme,\n  tipFormat,\n  className = ''\n}: DotPlotProps) {\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (!containerRef.current || !data || data.length === 0) return;\n\n    // Clear previous plot\n    containerRef.current.innerHTML = '';\n\n    // Build color configuration\n    let colorConfig: any = fill ? { legend: true } : undefined;\n\n    if (fill && colorScheme) {\n      if (Array.isArray(colorScheme)) {\n        colorConfig = { ...colorConfig, range: colorScheme };\n      } else {\n        // Extract domain and range from color scheme object\n        colorConfig = {\n          ...colorConfig,\n          domain: Object.keys(colorScheme),\n          range: Object.values(colorScheme)\n        };\n      }\n    }\n\n    // Create the plot\n    const plot = Plot.plot({\n      title,\n      subtitle,\n      style: {\n        backgroundColor: \"white\",\n        fontFamily: \"sans-serif\",\n      },\n      x: {\n        label: xLabel || x,\n        grid: true\n      },\n      y: {\n        label: yLabel || y\n      },\n      color: colorConfig,\n      marks: [\n        Plot.dot(data, {\n          x,\n          y,\n          fill: fill || \"currentColor\",\n          stroke: \"white\",\n          strokeWidth: 1,\n          r: radius,\n          fillOpacity,\n          title: tipFormat || (d => `${d[y]}: ${d[x]}`),\n          tip: true\n        }),\n        Plot.ruleX([0])\n      ],\n      width,\n      height,\n      marginLeft\n    });\n\n    containerRef.current.appendChild(plot);\n\n    return () => {\n      plot?.remove();\n    };\n  }, [data, x, y, fill, title, subtitle, xLabel, yLabel, radius, fillOpacity, width, height, marginLeft, colorScheme, tipFormat]);\n\n  return (\n    <div ref={containerRef} className={className} />\n  );\n}\n\nexport default DotPlot;\n","'use client';\n\nimport React, { useRef, useEffect } from 'react';\nimport * as Plot from \"@observablehq/plot\";\n\n/**\n * BarChart Component\n *\n * A simple, reusable bar chart visualization using Observable Plot.\n * Suitable for time series data, categorical comparisons, and data with confidence intervals.\n *\n * @example\n * ```tsx\n * <BarChart\n *   data={yearlyData}\n *   x=\"year\"\n *   y=\"value\"\n *   errorY={{ lower: \"ci_lower\", upper: \"ci_upper\" }}\n *   title=\"Support Over Time\"\n * />\n * ```\n */\n\nexport interface BarChartProps {\n  /** Data array to visualize */\n  data: any[];\n\n  /** Field name for x-axis (typically time or category) */\n  x: string;\n\n  /** Field name for y-axis (bar height) */\n  y: string;\n\n  /** Optional error bars configuration */\n  errorY?: {\n    lower: string;\n    upper: string;\n  };\n\n  /** Chart title */\n  title?: string;\n\n  /** Chart subtitle */\n  subtitle?: string;\n\n  /** Chart caption */\n  caption?: string;\n\n  /** X-axis label */\n  xLabel?: string;\n\n  /** Y-axis label */\n  yLabel?: string;\n\n  /** Bar fill color */\n  fill?: string;\n\n  /** Error bar stroke color */\n  errorStroke?: string;\n\n  /** Error bar stroke width */\n  errorStrokeWidth?: number;\n\n  /** Chart width in pixels */\n  width?: number;\n\n  /** Chart height in pixels */\n  height?: number;\n\n  /** Bottom margin in pixels */\n  marginBottom?: number;\n\n  /** Rotate x-axis labels (degrees) */\n  xTickRotate?: number;\n\n  /** Custom tick formatter for x-axis */\n  xTickFormat?: (d: any) => string;\n\n  /** Custom tick values for x-axis */\n  xTicks?: any[];\n\n  /** Additional CSS classes */\n  className?: string;\n}\n\nexport function BarChart({\n  data,\n  x,\n  y,\n  errorY,\n  title,\n  subtitle,\n  caption,\n  xLabel,\n  yLabel,\n  fill = \"#708090\",\n  errorStroke = \"#394E54\",\n  errorStrokeWidth = 2,\n  width = 800,\n  height = 400,\n  marginBottom = 60,\n  xTickRotate = 0,\n  xTickFormat,\n  xTicks,\n  className = ''\n}: BarChartProps) {\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (!containerRef.current || !data || data.length === 0) return;\n\n    // Clear previous plot\n    containerRef.current.innerHTML = '';\n\n    // Build marks array\n    const marks: any[] = [\n      // Main bar chart\n      Plot.barY(data, {\n        x,\n        y,\n        fill\n      })\n    ];\n\n    // Add error bars if provided\n    if (errorY) {\n      marks.push(\n        Plot.ruleX(data, {\n          x,\n          y1: errorY.lower,\n          y2: errorY.upper,\n          stroke: errorStroke,\n          strokeWidth: errorStrokeWidth\n        })\n      );\n    }\n\n    // Create the plot\n    const plot = Plot.plot({\n      width,\n      height,\n      marginBottom,\n      title,\n      subtitle,\n      caption,\n      style: {\n        backgroundColor: \"white\",\n        fontFamily: \"sans-serif\",\n      },\n      x: {\n        label: xLabel || x,\n        tickRotate: xTickRotate,\n        tickFormat: xTickFormat,\n        tickSize: 5,\n        labelOffset: 50,\n        ...(xTicks && { ticks: xTicks })\n      },\n      y: {\n        label: yLabel || y,\n        grid: true\n      },\n      marks\n    }) as SVGSVGElement;\n\n    containerRef.current.appendChild(plot);\n\n    return () => {\n      plot?.remove();\n    };\n  }, [data, x, y, errorY, title, subtitle, caption, xLabel, yLabel, fill, errorStroke, errorStrokeWidth, width, height, marginBottom, xTickRotate, xTickFormat, xTicks]);\n\n  return (\n    <div ref={containerRef} className={className} />\n  );\n}\n\nexport default BarChart;\n"]}