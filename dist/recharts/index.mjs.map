{"version":3,"sources":["../../src/recharts/timeseries.line.v1.tsx","../../src/recharts/TimeSeriesChart.tsx","../../src/recharts/AbortionOpinionChart.tsx","../../src/recharts/stat.demographic_bar.v1.tsx","../../src/recharts/ScatterplotRegression.tsx"],"names":["metadata","TimeSeriesChart","jsx","jsxs","ResponsiveContainer","LineChart","CartesianGrid","XAxis","YAxis","Tooltip","Line","ErrorBar","data","RechartsBarChart","Bar","r"],"mappings":"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","file":"index.mjs","sourcesContent":["'use client';\n\n\nimport {\n  LineChart,\n  Line,\n  XAxis,\n  YAxis,\n  Tooltip,\n  ResponsiveContainer,\n  ErrorBar,\n  CartesianGrid,\n} from 'recharts';\n\ninterface DataPoint {\n  year: string;\n  value: number;\n  ci_lower?: number;\n  ci_upper?: number;\n  n_actual?: number;\n  standard_error?: number;\n}\n\ninterface DataPointMetadataItem {\n  id: string;\n  name: string;\n  type: string;\n  units?: string;\n  value_prefix?: Record<string, string>;\n  value_suffix?: string;\n  categories?: string[];\n  var_original?: string;\n  label_original?: Record<string, string>;\n}\n\ninterface TimeSeriesMetadata {\n  note?: string;\n  type: string;\n  title: string;\n  subtitle: string;\n  source: {\n    id: string;\n    name: string;\n  };\n  question?: string;\n  years_n?: number;\n  year_min?: number;\n  year_max?: number;\n}\n\ninterface TimeSeriesChartProps {\n  data: DataPoint[];\n  metadata: TimeSeriesMetadata;\n  dataPointMetadata: DataPointMetadataItem[];\n}\n\nexport default function TimeSeriesChart({\n  data,\n  metadata,\n  dataPointMetadata,\n}: TimeSeriesChartProps) {\n  \n\n  // Convert year to a numerical value\n  const numericData = data.map((d) => ({\n    ...d,\n    year: parseInt(d.year, 10), // Convert year to number\n  }));\n\n  // Extract metadata for \"value\" field\n  const valueMetadata = dataPointMetadata.find((d) => d.id === 'value');\n\n \n\n  // Check for duplicate years\n  const dataYears = numericData.map((d) => d.year);\n  const uniqueYears = new Set(dataYears);\n  \n  if (dataYears.length !== uniqueYears.size) {\n    console.warn('Duplicate years found in the data prop!');\n\n    return <div>Error: Duplicate years detected in the dataset.</div>;\n  }\n\n  // Determine min and max years for the domain\n  const minYear = Math.min(...numericData.map((d) => d.year));\n  const maxYear = Math.max(...numericData.map((d) => d.year));\n\n  \n   // Custom tooltip component\n   const CustomTooltip = ({ active, payload, label }: any) => {\n     if (!active || !payload || !payload.length) return null;\n\n     const dataPoint = payload[0].payload;\n\n     return (\n       <div className=\"bg-white p-3 border border-gray-200 shadow-lg rounded-lg\">\n         <p className=\"font-medium\">{`Year: ${label}`}</p>\n         <p className=\"text-blue-600\">\n           {`${valueMetadata?.name}: ${dataPoint.value.toFixed(1)}${valueMetadata?.value_suffix || ''}`}\n         </p>\n         {dataPoint.ci_lower && dataPoint.ci_upper && (\n           <p className=\"text-gray-600 text-sm\">\n             {`95% CI: [${dataPoint.ci_lower.toFixed(1)}, ${dataPoint.ci_upper.toFixed(1)}]${valueMetadata?.value_suffix || ''}`}\n           </p>\n         )}\n         {dataPoint.n_actual && (\n           <p className=\"text-gray-600 text-sm\">\n             {`N: ${dataPoint.n_actual.toLocaleString()}`}\n           </p>\n         )}\n       </div>\n     );\n   };\n\n   return (\n     <div className=\"w-full\">\n       <div className=\"mb-2\">\n         <h2 className=\"text-2xl font-bold mb-1\">{metadata.title}</h2>\n         <p className=\"text-gray-600 mb-2\">{metadata.subtitle}</p>\n       </div>\n\n       <div className=\"w-full h-[400px]\">\n         <ResponsiveContainer width=\"100%\" height=\"100%\">\n         <LineChart\n             data={numericData}\n             margin={{\n               top: 20,\n               right: 30,\n               left: 20,\n               bottom: 20,\n             }}\n           >\n             <CartesianGrid strokeDasharray=\"3 3\" vertical={false} />\n\n             <XAxis\n               dataKey=\"year\"\n               type=\"number\" \n               domain={[minYear , maxYear ]}\n               tickCount={(maxYear - minYear) / 2}\n               tickFormatter={(value) => value.toString()}\n               padding={{ left: 20, right: 20 }}\n               tick={{ fontSize: 12 }}\n             />\n\n             <YAxis\ntickFormatter={(value) => {\n  const metadata = dataPointMetadata.find(d => d.id === 'value');\n\n  const prefix = (typeof metadata?.value_prefix === 'string')\n    ? metadata.value_prefix\n    : '';\n\n  const suffix = (typeof metadata?.value_suffix === 'string')\n    ? metadata.value_suffix\n    : '';\n\n  const num = Number(value);\n\n  let formattedValue: string;\n\n  if (num >= 1_000_000_000) {\n    formattedValue = (num / 1_000_000_000).toFixed(1).replace(/\\.0$/, '') + 'B';\n  } else if (num >= 1_000_000) {\n    formattedValue = (num / 1_000_000).toFixed(1).replace(/\\.0$/, '') + 'M';\n  } else if (num >= 1_000) {\n    formattedValue = (num / 1_000).toFixed(1).replace(/\\.0$/, '') + 'k';\n  } else {\n    formattedValue = num.toLocaleString(); // fallback for smaller numbers\n  }\n\n  return `${prefix}${formattedValue}${suffix}`;\n}}\n\n               domain={['auto', 'auto']} \n               axisLine={false}\n               tickLine={false}\n             />\n\n             {/* Tooltip */}\n             <Tooltip content={<CustomTooltip />} />\n\n             {/* Line for \"value\" */}\n             <Line\n               key=\"value-line\"\n               type=\"linear\"\n               dataKey=\"value\"\n               stroke=\"#000000\"\n               strokeWidth={1.5}\n               dot={{ r: 3, fill: \"#000000\" }} \n               activeDot={{ r: 5 }} \n               isAnimationActive={false} \n             >\n               {/* Error bars for confidence intervals */}\n               <ErrorBar\n                 dataKey={(d: DataPoint) =>\n                   d.standard_error ? (1.96 * d.standard_error) : 0\n                 }\n                 stroke=\"#000000\"\n                 strokeWidth={1}\n                 width={4}\n                 name=\"confidence-intervals\"\n               />\n             </Line>\n           </LineChart>\n         </ResponsiveContainer>\n\n         {/* Source information */}\n         <div className=\"mb-2\">\n         <p className=\"text-sm text-gray-400\">\n           Source: {metadata.source.name}\n         </p>\n         </div>\n\n       </div>\n     </div>\n   );\n}\n","'use client';\n\n\nimport {\n  LineChart,\n  Line,\n  XAxis,\n  YAxis,\n  Tooltip,\n  ResponsiveContainer,\n  ErrorBar,\n  CartesianGrid,\n} from 'recharts';\n\ninterface DataPoint {\n  year: string;\n  value: number;\n  ci_lower?: number;\n  ci_upper?: number;\n  n_actual?: number;\n  standard_error?: number;\n}\n\ninterface DataPointMetadataItem {\n  id: string;\n  name: string;\n  type: string;\n  units?: string;\n  value_prefix?: Record<string, string>;\n  value_suffix?: string;\n  categories?: string[];\n  var_original?: string;\n  label_original?: Record<string, string>;\n}\n\ninterface TimeSeriesMetadata {\n  note?: string;\n  type: string;\n  title: string;\n  subtitle: string;\n  source: {\n    id: string;\n    name: string;\n  };\n  question?: string;\n  years_n?: number;\n  year_min?: number;\n  year_max?: number;\n}\n\ninterface TimeSeriesChartProps {\n  data: DataPoint[];\n  metadata: TimeSeriesMetadata;\n  dataPointMetadata: DataPointMetadataItem[];\n}\n\nexport default function TimeSeriesChart({\n  data,\n  metadata,\n  dataPointMetadata,\n}: TimeSeriesChartProps) {\n  \n\n  // Convert year to a numerical value\n  const numericData = data.map((d) => ({\n    ...d,\n    year: parseInt(d.year, 10), // Convert year to number\n  }));\n\n  // Extract metadata for \"value\" field\n  const valueMetadata = dataPointMetadata.find((d) => d.id === 'value');\n\n \n\n  // Check for duplicate years\n  const dataYears = numericData.map((d) => d.year);\n  const uniqueYears = new Set(dataYears);\n  \n  if (dataYears.length !== uniqueYears.size) {\n    console.warn('Duplicate years found in the data prop!');\n\n    return <div>Error: Duplicate years detected in the dataset.</div>;\n  }\n\n  // Determine min and max years for the domain\n  const minYear = Math.min(...numericData.map((d) => d.year));\n  const maxYear = Math.max(...numericData.map((d) => d.year));\n\n  \n   // Custom tooltip component\n   const CustomTooltip = ({ active, payload, label }: any) => {\n     if (!active || !payload || !payload.length) return null;\n\n     const dataPoint = payload[0].payload;\n\n     return (\n       <div className=\"bg-white p-3 border border-gray-200 shadow-lg rounded-lg\">\n         <p className=\"font-medium\">{`Year: ${label}`}</p>\n         <p className=\"text-blue-600\">\n           {`${valueMetadata?.name}: ${dataPoint.value.toFixed(1)}${valueMetadata?.value_suffix || ''}`}\n         </p>\n         {dataPoint.ci_lower && dataPoint.ci_upper && (\n           <p className=\"text-gray-600 text-sm\">\n             {`95% CI: [${dataPoint.ci_lower.toFixed(1)}, ${dataPoint.ci_upper.toFixed(1)}]${valueMetadata?.value_suffix || ''}`}\n           </p>\n         )}\n         {dataPoint.n_actual && (\n           <p className=\"text-gray-600 text-sm\">\n             {`N: ${dataPoint.n_actual.toLocaleString()}`}\n           </p>\n         )}\n       </div>\n     );\n   };\n\n   return (\n     <div className=\"w-full\">\n       <div className=\"mb-2\">\n         <h2 className=\"text-2xl font-bold mb-1\">{metadata.title}</h2>\n         <p className=\"text-gray-600 mb-2\">{metadata.subtitle}</p>\n       </div>\n\n       <div className=\"w-full h-[400px]\">\n         <ResponsiveContainer width=\"100%\" height=\"100%\">\n         <LineChart\n             data={numericData}\n             margin={{\n               top: 20,\n               right: 30,\n               left: 20,\n               bottom: 20,\n             }}\n           >\n             <CartesianGrid strokeDasharray=\"3 3\" vertical={false} />\n\n             <XAxis\n               dataKey=\"year\"\n               type=\"number\" \n               domain={[minYear , maxYear ]}\n               tickCount={(maxYear - minYear) / 2}\n               tickFormatter={(value) => value.toString()}\n               padding={{ left: 20, right: 20 }}\n               tick={{ fontSize: 12 }}\n             />\n\n             <YAxis\ntickFormatter={(value) => {\n  const metadata = dataPointMetadata.find(d => d.id === 'value');\n\n  const prefix = (typeof metadata?.value_prefix === 'string')\n    ? metadata.value_prefix\n    : '';\n\n  const suffix = (typeof metadata?.value_suffix === 'string')\n    ? metadata.value_suffix\n    : '';\n\n  const num = Number(value);\n\n  let formattedValue: string;\n\n  if (num >= 1_000_000_000) {\n    formattedValue = (num / 1_000_000_000).toFixed(1).replace(/\\.0$/, '') + 'B';\n  } else if (num >= 1_000_000) {\n    formattedValue = (num / 1_000_000).toFixed(1).replace(/\\.0$/, '') + 'M';\n  } else if (num >= 1_000) {\n    formattedValue = (num / 1_000).toFixed(1).replace(/\\.0$/, '') + 'k';\n  } else {\n    formattedValue = num.toLocaleString(); // fallback for smaller numbers\n  }\n\n  return `${prefix}${formattedValue}${suffix}`;\n}}\n\n               domain={['auto', 'auto']} \n               axisLine={false}\n               tickLine={false}\n             />\n\n             {/* Tooltip */}\n             <Tooltip content={<CustomTooltip />} />\n\n             {/* Line for \"value\" */}\n             <Line\n               key=\"value-line\"\n               type=\"linear\"\n               dataKey=\"value\"\n               stroke=\"#000000\"\n               strokeWidth={1.5}\n               dot={{ r: 3, fill: \"#000000\" }} \n               activeDot={{ r: 5 }} \n               isAnimationActive={false} \n             >\n               {/* Error bars for confidence intervals */}\n               <ErrorBar\n                 dataKey={(d: DataPoint) =>\n                   d.standard_error ? (1.96 * d.standard_error) : 0\n                 }\n                 stroke=\"#000000\"\n                 strokeWidth={1}\n                 width={4}\n                 name=\"confidence-intervals\"\n               />\n             </Line>\n           </LineChart>\n         </ResponsiveContainer>\n\n         {/* Source information */}\n         <div className=\"mb-2\">\n         <p className=\"text-sm text-gray-400\">\n           Source: {metadata.source.name}\n         </p>\n         </div>\n\n       </div>\n     </div>\n   );\n}\n","\"use client\";\n\nimport React, { useState } from \"react\";\nimport {\n  BarChart,\n  Bar,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n  ResponsiveContainer,\n  ErrorBar,\n  Cell,\n} from \"recharts\";\n\ninterface DataPoint {\n  Race: string;\n  value: number;\n  ci_lower: number;\n  ci_upper: number;\n  n_actual: number;\n  Education: string;\n  Census_Region: string;\n  standard_error: number;\n}\n\ninterface Metadata {\n  note: string;\n  type: string;\n  title: string;\n  source: {\n    id: string;\n    name: string;\n  };\n  question: string;\n  subtitle: string;\n}\n\ninterface DataPointMetadata {\n  id: string;\n  name: string;\n  type: string;\n  categories?: string[];\n  units?: string;\n  value_suffix?: string;\n  value_prefix?: string;\n}\n\ninterface ChartData {\n  metadata: Metadata;\n  dataPoints: DataPoint[];\n  dataPointMetadata: DataPointMetadata[];\n}\n\ninterface Props {\n  data: ChartData;\n}\n\nexport default function AbortionOpinionChart({ data }: Props) {\n  const [selectedRegion, setSelectedRegion] = useState<string>(\"All\");\n  const [selectedEducation, setSelectedEducation] = useState<string>(\"All\");\n\n  const { metadata, dataPoints, dataPointMetadata } = data;\n\n  // Extract categories from metadata\n  const regions = [\"All\", ...(dataPointMetadata.find(d => d.id === \"Census_Region\")?.categories || [])];\n  const educationLevels = [\"All\", ...(dataPointMetadata.find(d => d.id === \"Education\")?.categories || [])];\n  const races = dataPointMetadata.find(d => d.id === \"Race\")?.categories || [];\n\n  // Filter data based on selections\n  const filteredData = dataPoints.filter(point => {\n    const regionMatch = selectedRegion === \"All\" || point.Census_Region === selectedRegion;\n    const educationMatch = selectedEducation === \"All\" || point.Education === selectedEducation;\n    return regionMatch && educationMatch;\n  });\n\n  // Group data by region and education for visualization\n  const groupedData = React.useMemo(() => {\n    const groups: { [key: string]: any } = {};\n\n    filteredData.forEach(point => {\n      const key = `${point.Census_Region} - ${point.Education}`;\n      if (!groups[key]) {\n        groups[key] = {\n          name: key,\n          region: point.Census_Region,\n          education: point.Education,\n        };\n      }\n      groups[key][`${point.Race}`] = point.value;\n      groups[key][`${point.Race}_error`] = point.standard_error * 1.96; // 95% CI\n      groups[key][`${point.Race}_ci_lower`] = point.ci_lower;\n      groups[key][`${point.Race}_ci_upper`] = point.ci_upper;\n      groups[key][`${point.Race}_n`] = point.n_actual;\n    });\n\n    return Object.values(groups).sort((a, b) => {\n      // Sort by region first, then education\n      if (a.region !== b.region) {\n        return regions.indexOf(a.region) - regions.indexOf(b.region);\n      }\n      return educationLevels.indexOf(a.education) - educationLevels.indexOf(b.education);\n    });\n  }, [filteredData, regions, educationLevels]);\n\n  const CustomTooltip = ({ active, payload, label }: any) => {\n    if (!active || !payload?.length) return null;\n\n    const data = payload[0]?.payload;\n\n    return (\n      <div className=\"bg-white p-4 border border-gray-300 shadow-lg rounded-lg\">\n        <p className=\"font-semibold mb-2 text-sm\">{label}</p>\n        <div className=\"space-y-1\">\n          {races.map((race) => {\n            const value = data[race];\n            const ciLower = data[`${race}_ci_lower`];\n            const ciUpper = data[`${race}_ci_upper`];\n            const n = data[`${race}_n`];\n\n            if (value === undefined) return null;\n\n            return (\n              <div key={race} className=\"text-sm\">\n                <span className=\"font-medium\">{race}:</span>{\" \"}\n                <span className=\"font-semibold\">{value.toFixed(1)}%</span>\n                <div className=\"text-xs text-gray-600 ml-2\">\n                  95% CI: [{ciLower.toFixed(1)}%, {ciUpper.toFixed(1)}%]\n                </div>\n                <div className=\"text-xs text-gray-500 ml-2\">n = {n}</div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    );\n  };\n\n  const colors = {\n    White: \"#374151\",\n    Black: \"#9CA3AF\",\n  };\n\n  return (\n    <div className=\"w-full space-y-4\">\n      {/* Title and subtitle */}\n      <div className=\"space-y-2\">\n        <h2 className=\"text-2xl font-bold\">{metadata.title}</h2>\n        <p className=\"text-sm text-gray-600\">{metadata.subtitle}</p>\n        <p className=\"text-xs text-gray-500 italic\">{metadata.question}</p>\n      </div>\n\n      {/* Filters */}\n      <div className=\"flex gap-4 items-center flex-wrap\">\n        <div className=\"flex items-center gap-2\">\n          <label htmlFor=\"region\" className=\"text-sm font-medium\">\n            Region:\n          </label>\n          <select\n            id=\"region\"\n            value={selectedRegion}\n            onChange={(e) => setSelectedRegion(e.target.value)}\n            className=\"border border-gray-300 rounded px-3 py-1 text-sm\"\n          >\n            {regions.map((region) => (\n              <option key={region} value={region}>\n                {region}\n              </option>\n            ))}\n          </select>\n        </div>\n\n        <div className=\"flex items-center gap-2\">\n          <label htmlFor=\"education\" className=\"text-sm font-medium\">\n            Education:\n          </label>\n          <select\n            id=\"education\"\n            value={selectedEducation}\n            onChange={(e) => setSelectedEducation(e.target.value)}\n            className=\"border border-gray-300 rounded px-3 py-1 text-sm\"\n          >\n            {educationLevels.map((level) => (\n              <option key={level} value={level}>\n                {level}\n              </option>\n            ))}\n          </select>\n        </div>\n      </div>\n\n      {/* Chart */}\n      <div className=\"w-full\" style={{ height: Math.max(400, groupedData.length * 40) }}>\n        <ResponsiveContainer width=\"100%\" height=\"100%\">\n          <BarChart\n            data={groupedData}\n            layout=\"vertical\"\n            margin={{ top: 20, right: 30, left: 200, bottom: 20 }}\n          >\n            <CartesianGrid strokeDasharray=\"3 3\" horizontal={false} />\n            <XAxis\n              type=\"number\"\n              domain={[0, 100]}\n              tickFormatter={(value) => `${value}%`}\n              label={{ value: \"Support for Legal Abortion (%)\", position: \"bottom\", offset: 0 }}\n            />\n            <YAxis\n              dataKey=\"name\"\n              type=\"category\"\n              width={190}\n              tick={{ fontSize: 11 }}\n            />\n            <Tooltip content={<CustomTooltip />} />\n            <Legend />\n\n            {races.map((race) => (\n              <Bar\n                key={race}\n                dataKey={race}\n                fill={colors[race as keyof typeof colors] || \"#6B7280\"}\n                name={race}\n                isAnimationActive={false}\n              >\n                <ErrorBar\n                  dataKey={`${race}_error`}\n                  stroke=\"#000000\"\n                  strokeWidth={1}\n                  width={4}\n                />\n              </Bar>\n            ))}\n          </BarChart>\n        </ResponsiveContainer>\n      </div>\n\n      {/* Source and notes */}\n      <div className=\"text-xs text-gray-500 space-y-1 mt-4 border-t pt-4\">\n        <p>\n          <strong>Source:</strong> {metadata.source.name}\n        </p>\n        <p>\n          <strong>Note:</strong> {metadata.note}\n        </p>\n      </div>\n    </div>\n  );\n}\n","'use client';\n\nimport React from 'react';\nimport {\n  Bar,\n  BarChart as RechartsBarChart,\n  CartesianGrid,\n  XAxis,\n  YAxis,\n  Tooltip,\n  ErrorBar,\n  ResponsiveContainer\n} from 'recharts';\n\n/**\n * DemographicBarChart Component\n *\n * A Recharts-based bar chart for displaying demographic data with error bars.\n * Suitable for showing distributions across demographic categories with confidence intervals.\n *\n * @example\n * ```tsx\n * <DemographicBarChart\n *   data={[\n *     { category: '18-24', value: 45.2, errorLow: 2.1, errorHigh: 2.3 },\n *     { category: '25-34', value: 52.1, errorLow: 1.8, errorHigh: 1.9 }\n *   ]}\n *   categoryKey=\"category\"\n *   valueKey=\"value\"\n *   errorLowKey=\"errorLow\"\n *   errorHighKey=\"errorHigh\"\n * />\n * ```\n */\n\nexport interface DemographicBarChartProps {\n  /** Data array to visualize */\n  data: any[];\n\n  /** Field name for category labels (x-axis) */\n  categoryKey: string;\n\n  /** Field name for bar height values (y-axis) */\n  valueKey: string;\n\n  /** Field name for lower error values */\n  errorLowKey?: string;\n\n  /** Field name for upper error values */\n  errorHighKey?: string;\n\n  /** Chart title */\n  title?: string;\n\n  /** X-axis label */\n  xLabel?: string;\n\n  /** Y-axis label */\n  yLabel?: string;\n\n  /** Bar fill color */\n  fill?: string;\n\n  /** Error bar stroke color */\n  errorStroke?: string;\n\n  /** Error bar stroke width */\n  errorStrokeWidth?: number;\n\n  /** Chart width (default: responsive) */\n  width?: number | string;\n\n  /** Chart height in pixels */\n  height?: number;\n\n  /** Rotate x-axis labels (degrees) */\n  xTickRotate?: number;\n\n  /** X-axis tick font size */\n  xTickFontSize?: number;\n\n  /** Show grid lines */\n  showGrid?: boolean;\n\n  /** Additional CSS classes */\n  className?: string;\n}\n\nexport function DemographicBarChart({\n  data,\n  categoryKey,\n  valueKey,\n  errorLowKey,\n  errorHighKey,\n  title,\n  xLabel,\n  yLabel = 'Value (%)',\n  fill = '#8884d8',\n  errorStroke = '#666',\n  errorStrokeWidth = 2,\n  width = '100%',\n  height = 400,\n  xTickRotate = -45,\n  xTickFontSize = 10,\n  showGrid = true,\n  className = ''\n}: DemographicBarChartProps) {\n  if (!data || data.length === 0) {\n    return (\n      <div className={`p-6 text-center text-gray-500 ${className}`}>\n        No demographic data available\n      </div>\n    );\n  }\n\n  // Transform error data if provided as absolute values\n  const transformedData = data.map(item => {\n    const transformed: any = { ...item };\n\n    // If error keys are provided, create error array for ErrorBar\n    if (errorLowKey && errorHighKey) {\n      transformed.error = [item[errorLowKey], item[errorHighKey]];\n    }\n\n    return transformed;\n  });\n\n  return (\n    <div className={className}>\n      {title && <h3 className=\"text-lg font-semibold mb-4 text-center\">{title}</h3>}\n      <ResponsiveContainer width={width} height={height}>\n        <RechartsBarChart\n          data={transformedData}\n          margin={{ top: 20, right: 30, left: 20, bottom: 80 }}\n        >\n          {showGrid && <CartesianGrid strokeDasharray=\"3 3\" />}\n\n          <XAxis\n            dataKey={categoryKey}\n            label={xLabel ? { value: xLabel, position: 'insideBottom', offset: -70 } : undefined}\n            interval={0}\n            angle={xTickRotate}\n            textAnchor=\"end\"\n            height={100}\n            tick={{ fontSize: xTickFontSize }}\n          />\n\n          <YAxis\n            label={yLabel ? { value: yLabel, angle: -90, position: 'insideLeft' } : undefined}\n          />\n\n          <Tooltip />\n\n          <Bar dataKey={valueKey} fill={fill}>\n            {errorLowKey && errorHighKey && (\n              <ErrorBar\n                dataKey=\"error\"\n                stroke={errorStroke}\n                strokeWidth={errorStrokeWidth}\n              />\n            )}\n          </Bar>\n        </RechartsBarChart>\n      </ResponsiveContainer>\n    </div>\n  );\n}\n\nexport default DemographicBarChart;\n","import React from \"react\";\nimport {\n  ResponsiveContainer,\n  ComposedChart,\n  CartesianGrid,\n  XAxis,\n  YAxis,\n  Tooltip,\n  Scatter,\n  ZAxis,\n  ReferenceLine,\n  Area,\n  Line,\n} from \"recharts\";\n\n/** -----------------------------------------------------------\n *  Stats helpers (OLS, Pearson r, band)\n *  --------------------------------------------------------- */\nexport type XY = { x: number; y: number };\n\nexport function pearsonR(points: XY[]) {\n  const n = points.length;\n  if (n < 2) return NaN;\n  let sx = 0, sy = 0, sxx = 0, syy = 0, sxy = 0;\n  for (const { x, y } of points) {\n    sx += x; sy += y; sxx += x * x; syy += y * y; sxy += x * y;\n  }\n  const cov = sxy - (sx * sy) / n;\n  const vx = sxx - (sx * sx) / n;\n  const vy = syy - (sy * sy) / n;\n  if (vx <= 0 || vy <= 0) return NaN;\n  return cov / Math.sqrt(vx * vy);\n}\n\nexport function ols(points: XY[]) {\n  const n = points.length;\n  if (n < 2) return { b0: 0, b1: 0, se: NaN, xbar: NaN, sxx: NaN };\n\n  let sx = 0, sy = 0, sxx = 0, sxy = 0;\n  for (const { x, y } of points) {\n    sx += x; sy += y; sxx += x * x; sxy += x * y;\n  }\n  const denom = n * sxx - sx * sx;\n  const b1 = denom === 0 ? 0 : (n * sxy - sx * sy) / denom;\n  const b0 = (sy - b1 * sx) / n;\n\n  // Residual standard error (unbiased, n-2 df)\n  const sse = points.reduce((acc, p) => {\n    const yhat = b0 + b1 * p.x;\n    return acc + (p.y - yhat) ** 2;\n  }, 0);\n  const se = Math.sqrt(sse / Math.max(1, n - 2));\n\n  const xbar = sx / n;\n  const sxxCentered = points.reduce((a, p) => a + (p.x - xbar) ** 2, 0);\n\n  return { b0, b1, se, xbar, sxx: sxxCentered };\n}\n\n/** Build regression line and a 95% confidence band for the fitted mean. */\nfunction lineAndBand(points: XY[], xMin: number, xMax: number, steps = 120) {\n  const { b0, b1, se, xbar, sxx } = ols(points);\n  const xs: number[] = [];\n  for (let i = 0; i <= steps; i++) xs.push(xMin + (i * (xMax - xMin)) / steps);\n\n  // t* for ~95% CI with large-ish df (n-2). Keep it simple & robust.\n  const t = 2.0;\n\n  const rows = xs.map((x) => {\n    const y = b0 + b1 * x;\n    // SE of fitted mean y(x):  se * sqrt( 1/n + (x - x)^2 / Sxx )\n    const seFit =\n      isFinite(se) && isFinite(sxx) && sxx > 0 && points.length > 0\n        ? se * Math.sqrt(1 / points.length + ((x - xbar) ** 2) / sxx)\n        : NaN;\n    const yLow = isFinite(seFit) ? y - t * seFit : y;\n    const yHigh = isFinite(seFit) ? y + t * seFit : y;\n    return { x, y, band: [yLow, yHigh] as [number, number] };\n  });\n\n  return { line: rows.map(({ x, y }) => ({ x, y })), band: rows };\n}\n\n/** -----------------------------------------------------------\n *  Data prep\n *  --------------------------------------------------------- */\n\ntype RegionKey = \"Catholic\" | \"Protestant\" | \"Orthodox\" | \"Muslim\" | \"Other\";\n\nconst REGION_COLORS: Record<RegionKey, string> = {\n  Catholic: \"#facc15\",    // gold\n  Protestant: \"#52525b\",  // zinc-600\n  Orthodox: \"#3b82f6\",    // blue-500\n  Muslim: \"#ef4444\",      // red-500\n  Other: \"#22c55e\",       // green-500\n};\n\nfunction normalizeReligion(s: string | undefined): RegionKey {\n  const v = (s || \"\").toLowerCase();\n  if (v.includes(\"catholic\")) return \"Catholic\";\n  if (v.includes(\"protestant\")) return \"Protestant\";\n  if (v.includes(\"orthodox\")) return \"Orthodox\";\n  if (v.includes(\"muslim\") || v.includes(\"islam\")) return \"Muslim\";\n  return \"Other\";\n}\n\nexport type EssRow = {\n  cntry: string;\n  iso3?: string;\n  religion?: string;            // e.g., \"Roman Catholic\"\n  population?: number;          // millions\n  hdi?: number;                 // 01\n  gdp?: number;                 // PPP$ 2011\n  education?: number;           // mean years\n  [k: string]: any;             // possible \"happiness\" key\n};\n\nexport type CountryDatum = {\n  name: string;\n  region: RegionKey;\n  religion: string;\n  population_m: number;\n  happiness: number;            // 010\n  hdi?: number;\n  gdp?: number;\n  education?: number;\n};\n\nexport function prepareEssRows(\n  rows: EssRow[],\n  opts: { happinessKey?: string } = {}\n): CountryDatum[] {\n  const { happinessKey = \"happiness\" } = opts;\n\n  return rows.map((r) => {\n    const region = normalizeReligion(r.religion);\n    const happiness = Number(r[happinessKey]); // you control which column is passed in\n    return {\n      name: r.cntry,\n      religion: r.religion || region,\n      region,\n      population_m: Number(r.population ?? 0),\n      happiness: isFinite(happiness) ? happiness : NaN,\n      hdi: Number(r.hdi),\n      gdp: Number(r.gdp),\n      education: Number(r.education),\n    };\n  });\n}\n\n/** -----------------------------------------------------------\n *  UI helpers\n *  --------------------------------------------------------- */\n\nfunction fmtGDP(v: number) {\n  if (!isFinite(v)) return \"\";\n  if (Math.abs(v) >= 1000) return `${Math.round(v / 1000)}k`;\n  return `${v}`;\n}\nfunction fmtMillions(v: number) {\n  if (!isFinite(v)) return \"\";\n  // keep 1 decimal for < 10M else integer-ish\n  return v < 10 ? `${v.toFixed(1)} Million` : `${Math.round(v)} Million`;\n}\n\nconst BubbleTooltip = ({ active, payload, label, xLabel, xFmt }: any) => {\n  if (!active || !payload || !payload.length) return null;\n  const d = payload[0].payload;\n\n  return (\n    <div className=\"relative max-w-xs rounded-xl bg-white/95 p-3 shadow-xl ring-1 ring-black/5\">\n      {/* little pointer */}\n      <div\n        className=\"absolute -bottom-2 left-1/2 h-3 w-3 -translate-x-1/2 rotate-45 rounded-sm bg-white ring-1 ring-black/5\"\n        aria-hidden\n      />\n      <div className=\"text-base font-semibold\">{d.name}</div>\n      <div className=\"mt-1 text-sm leading-5\">\n        <div>\n          <span className=\"font-semibold\">{xLabel}:</span>{\" \"}\n          {xFmt ? xFmt(d.x) : d.x}\n        </div>\n        <div>\n          <span className=\"font-semibold\">Average Happiness:</span>{\" \"}\n          {isFinite(d.y) ? Number(d.y).toFixed(2) : \"\"}\n        </div>\n        {isFinite(d.population_m) && (\n          <div>\n            <span className=\"font-semibold\">Population:</span>{\" \"}\n            {fmtMillions(d.population_m)}\n          </div>\n        )}\n        <div className=\"flex items-center gap-1\">\n          <span className=\"font-semibold\">Religion:</span>\n          <span\n            className=\"inline-block h-2.5 w-2.5 rounded-full\"\n            style={{ background: d.fill }}\n          />\n          <span>{d.religion}</span>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n/** -----------------------------------------------------------\n *  Section (single chart)\n *  --------------------------------------------------------- */\n\ntype SectionProps = {\n  title: string;\n  xKey: keyof CountryDatum;           // 'hdi' | 'gdp' | 'education'\n  xLabel: string;\n  xDomain: [number, number];\n  xTickFmt?: (v: number) => string;\n  data: CountryDatum[];\n};\n\nfunction Section({ title, xKey, xLabel, xDomain, xTickFmt, data }: SectionProps) {\n  // Debug happiness values\n  if (title.includes(\"Human Development\") && data.length > 0) {\n    console.log(`${title} - Sample happiness values:`,\n      data.slice(0, 5).map(d => `${d.name}: ${d.happiness}`)\n    );\n  }\n\n  // Filter & project to points\n  const points: XY[] = data\n    .filter((d) => Number.isFinite(d[xKey] as number) && Number.isFinite(d.happiness))\n    .map((d) => ({ x: Number(d[xKey] as number), y: Number(d.happiness) }));\n\n  const r = pearsonR(points);\n  const [xMin, xMax] = xDomain;\n  const { line, band } = lineAndBand(points, xMin, xMax, 100);\n\n  // Recharts expects each scatter row to carry x/y/z + your other fields\n  const scatterData = data.map((d) => {\n    const x = Number(d[xKey] as number);\n    const y = Number(d.happiness);\n    return {\n      ...d,\n      x,\n      y,\n      // bubble area ~ sqrt(pop) -> visually closer to population without extreme skew\n      z: isFinite(d.population_m) ? Math.max(24, Math.sqrt(d.population_m) * 4) : 24,\n      fill: REGION_COLORS[d.region] || \"#8884d8\",\n    };\n  });\n\n  return (\n    <div className=\"flex flex-col\">\n      <div className=\"mb-1 text-lg md:text-xl font-semibold\">{title}</div>\n      <div className=\"h-[340px] w-full\">\n        <ResponsiveContainer>\n          <ComposedChart margin={{ top: 8, right: 18, bottom: 8, left: 8 }}>\n            <CartesianGrid strokeDasharray=\"3 3\" />\n            <XAxis\n              type=\"number\"\n              dataKey=\"x\"\n              domain={xDomain}\n              tickFormatter={xTickFmt}\n              label={{ value: xLabel, position: \"insideBottom\", offset: -2 }}\n            />\n            <YAxis\n              type=\"number\"\n              domain={['dataMin - 0.5', 'dataMax + 0.5']}\n              label={{ value: \"Average Happiness\", angle: -90, position: \"insideLeft\" }}\n            />\n            <ZAxis dataKey=\"z\" range={[50, 240]} />\n\n            {/* Confidence band (as in BandedChart) */}\n            <Area\n              type=\"monotone\"\n              data={band}\n              dataKey=\"band\"                                    // [low, high]\n              stroke=\"none\"\n              fill=\"#94a3b8\"                                   // slate-400\n              fillOpacity={0.22}\n              isAnimationActive={false}\n            />\n\n            {/* Line of best fit */}\n            <Line\n              type=\"monotone\"\n              data={line}\n              dataKey=\"y\"\n              dot={false}\n              stroke=\"#475569\"                                  // slate-600\n              strokeWidth={2}\n              isAnimationActive={false}\n            />\n\n            {/* A light guide at 7 like the mock */}\n            <ReferenceLine y={7} stroke=\"#cbd5e1\" strokeDasharray=\"4 4\" />\n\n            {/* Bubbles */}\n            <Scatter\n              data={scatterData}\n              dataKey=\"y\"\n              shape={(props: any) => {\n                const { cx, cy, payload, size } = props;\n                // Recharts passes 'size' scaled by <ZAxis range>; treat it as area.\n                const r = Math.sqrt(Math.max(0, size) / Math.PI);\n                return (\n                  <circle\n                    cx={cx}\n                    cy={cy}\n                    r={r}\n                    fill={payload.fill}\n                    fillOpacity={0.9}\n                    stroke=\"#334155\"\n                    strokeOpacity={0.35}\n                  />\n                );\n              }}\n            />\n\n            <Tooltip\n              cursor={{ strokeDasharray: \"3 3\" }}\n              content={\n                // We pass the axis label and formatter so the tooltip can render the x-value correctly.\n                <BubbleTooltip xLabel={xLabel} xFmt={xTickFmt} /> as any\n              }\n              wrapperStyle={{ outline: \"none\" }}\n            />\n          </ComposedChart>\n        </ResponsiveContainer>\n      </div>\n      <div className=\"mt-1 text-xs text-violet-700\">\n        Correlation: {isFinite(r) ? r.toFixed(2) : \"\"}\n      </div>\n    </div>\n  );\n}\n\n/** -----------------------------------------------------------\n *  Legend\n *  --------------------------------------------------------- */\nfunction RegionLegend() {\n  const items = (Object.keys(REGION_COLORS) as RegionKey[]).map((k) => [k, REGION_COLORS[k]] as const);\n  return (\n    <div className=\"flex flex-wrap items-center gap-3 text-sm\">\n      {items.map(([label, color]) => (\n        <div key={label} className=\"flex items-center gap-1\">\n          <span className=\"inline-block h-3 w-3 rounded-full\" style={{ background: color }} />\n          <span>{label}</span>\n        </div>\n      ))}\n    </div>\n  );\n}\n\n/** -----------------------------------------------------------\n *  Main panel\n *  --------------------------------------------------------- */\n\ntype PanelProps = { data: CountryDatum[] };\n\n/**\n * Expect `data` shaped like `CountryDatum[]`.\n * If you're piping raw rows from the attached Excel, call `prepareEssRows(rows, { happinessKey: 'happiness' })`\n * where `happiness` is the column in your prepared dataset that contains 010 averages.\n */\nexport default function HappinessCorrelatesPanel({ data }: PanelProps) {\n  const dataset = data ?? [];\n\n  return (\n    <div className=\"w-full p-4 md:p-6\">\n      <div className=\"grid items-start gap-8 md:grid-cols-3\">\n        <Section\n          title=\"Human Development Index\"\n          xKey=\"hdi\"\n          xLabel=\"HDI\"\n          xDomain={[0.5, 1.0]}\n          data={dataset}\n        />\n        <Section\n          title=\"GDP per capita (2011 PPP$)\"\n          xKey=\"gdp\"\n          xLabel=\"GDP per capita (2011 PPP$)\"\n          xDomain={[3000, 55000]}\n          xTickFmt={fmtGDP}\n          data={dataset}\n        />\n        <Section\n          title=\"Mean Year of Schooling\"\n          xKey=\"education\"\n          xLabel=\"Mean Years of Schooling\"\n          xDomain={[8, 14]}\n          data={dataset}\n        />\n      </div>\n\n      <div className=\"mt-5\">\n        <RegionLegend />\n      </div>\n    </div>\n  );\n}\n"]}